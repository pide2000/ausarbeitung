%!TEX root = ../document.tex
\chapter{Lösungsansatz} \label{chp:Loesungsansatz}
	
	Es soll nun ein Verfahren zur Geolokalisierung von Twitter-Nutzern vorgestellt werden.
	Dabei soll der Standort des Nutzers aus Informationen des Nutzer-Profils bestimmt werden.

	Im ersten Kapitel wird ganz allgemein auf die Geolokalisierung eingegangen und die nötigen Komponenten werden identifiziert und benannt.
	Hierzu wird betrachtet was eine Geolokalisierung leisten muss.
	Danach wird darauf eingegangen wie dies mit Hilfe einer geeigneten Datenbasis umgesetzt werden kann.
	Zum Schluss wird die Geolokalisierung unter Zuhilfenahme einer Datenbasis an einem Beispiel erläutert.

	Für die Geolokalisierung eines Twitter-Nutzers werden die Datenwerte des Nutzer-Standortes und der Nutzer-Zeitzone verwendet.
	Diese werden eingehend untersucht.
	Auf Basis dieser Untersuchung wird ein Lernverfahren entwickelt um eine Datenbasis einzulernen.

	Zum Schluss wird ein Verfahren zur Geolokalisierung vorgestellt welches die wahrscheinlichste Georeferenz zu einem gegebenen Twitter-Nutzer ermittelt.
	Dabei wird die eingelernte Datenbasis als Grundlage für die Bestimmung der Georeferenz verwendet.
	
	\newpage
	
	\section{Geolokalisierung} \label{sec:ueberblick} 

		Enthält ein Datensatz Informationen zu einem geografischen Objekt, so können in diesem geografische Indikatoren enthalten sein.
		Durch diese geografischen Indikatoren kann dem Datensatz, und damit dem geografischen Objekt, eine Georeferenz zugewiesen werden. 

		Die Zuordnung einer Georeferenz mit Hilfe von geografischen Indikatoren soll Geolokalisierung genannt werden.  

		In Abbildung \ref{img:geolokalisierung} wird dies dargestellt.
		Im Gegensatz zu Abbildung \ref{img:geogIndi} ist kein direkter Verweis vom geografischen Objekt zu einer Georeferenz vorhanden. 
		Stattdessen wird mit Hilfe der geografischen Indikatoren a und b durch die Geolokalisierung eine Georeferenz zugeordnet.

		\begin{figure}[h!]
		\begin{center}
		\includegraphics[scale=1.0]{geolokalisierung.pdf}
		\caption{Geografische Hierarchieebenen}
		\label{img:geolokalisierung}
		\end{center}
		\end{figure}	

		Um aus den geografischen Indikatoren eine Georeferenz ableiten zu können soll eine Datenbasis verwendet werden.
		Diese ordnet den geografischen Indikatoren eine Georeferenz zu.
		Die gespeicherte Georeferenz ist bekannt und kann genau bestimmt werden. 
		Das bedeutet: Ein Hinweis auf eine geografische Position wird auf eine konkrete, bekannte geografische Position abgebildet.
		Eine solche Datenbasis soll Georeferenz-Basis genannt werden.  

		Im einfachsten Fall liegt ein geografischer Indikator vor, dem direkt eine Georeferenz zugewiesen werden kann.
		Dies kann Beispielsweise ein eindeutiges Toponym sein.	
		Ein Ortsverzeichnis könnte hier als Georeferenz-Basis verwendet werden.
		Liegt der Datenwert "'Karlsruhe"' vor so würde die Geolokalisierung durch eine Abfrage an die Georeferenz-Basis die Stadt Karlsruhe als Georeferenz zuweisen.

		Wie in Kapitel \ref{sec:ToponymeInGeografischenIndikatoren} bereits erläutert sind Toponyme allerdings nicht immer eindeutig oder bekannt. 
		Die Abfrage an ein Ortsverzeichnis liefert potenziell mehrere Ergebnisse was eine weitere Verarbeitung der Ergebnisse erfordert.
		Ist das Toponym nicht bekannt so kann kein Ergebnis geliefert.

		Des weiteren sind die Datenwerte eines Datensatzes nicht immer direkt zu verwenden.
		Dies kommt ganz darauf an wie die Daten erhoben wurden. 
		Nutzereingaben auf Webseiten können beispielsweise aus einer Liste gewählt, oder in ein Freitext-Feld eingegeben werden.
		Werden die Datenwerte durch eine Liste erhoben liegt eine klar definierte Menge an möglichen Datenwerten vor.
		Haben die Datenwerte in der Liste geografischen Bezug so können ihnen Georeferenzen zugeordnet werden.
		Die so entstandenen Paare aus Datenwert und Georeferenz können in der Georeferenz-Basis abgespeichert werden.

		Soll ein Nutzer in ein Freitext-Feld seinen aktuellen Standort eingeben, und der Datenwert wird direkt übernommen muss dieser vorverarbeitet werden.
		Es ist zwar wahrscheinlich, dass der Nutzer ein Toponym angibt, aber es kann durch die direkte Übernahme der Eingabe zu Problemen kommen.
		Zunächst kann nicht einmal entschieden werden ob der Datenwert überhaupt einen geografischen Indikator darstellt.
		Zudem können in einem Freitext-Feld mehrere geografische Indikatoren auftauchen.
		Diese können widersprüchlich sein oder aber eine geografische Position genauer spezifizieren. 
		Durch die direkte Übernahme des Wertes können alle in Kapitel \ref{sec:ToponymeInGeografischenIndikatoren} aufgeführten Probleme auftreten.
		Dies macht die Zuordnung einer Georeferenz durch eine Ortsverzeichnis schwierig.
		Soll trotzdem mit Hilfe eines Ortsverzeichnisses eine Geolokalisierung durchgeführt werden ist zumindest eine umfangreiche Vor- und Nachverarbeitung nötig.

		In Abbildung \ref{img:geolokalisierungBsp} ist ein Beispiel zur Verwendung einer Georeferenz-Basis dargestellt.
		Der Datenwert "'Karlsruhe"' wird dabei auf eine Georeferenz aufgelöst indem eine Abfrage an die Georeferenz-Basis durchgeführt wird.
		Die zurückgelieferte Georeferenz wird dem Datensatz zugeordnet.

		\begin{figure}[h!]
		\begin{center}
		\includegraphics[scale=1.0]{geolokalisierungBsp.pdf}
		\caption{Geolokalisierung mit Referenz-Basis}
		\label{img:geolokalisierungBsp}
		\end{center}
		\end{figure}	

		Im folgenden Kapitel soll eine erste Struktur für eine Georeferenz-Basis vorgestellt werden.
		Es sollen dabei die minimalen Anforderungen an eine solche Datenbasis erfüllt werden.

	\section{Minimale Struktur einer Georeferenz-Basis zur Geolokalisierung} \label{sec:generelleStruktur} 
		
		Nach Abbildung \ref{img:geolokalisierung} wird bei der Geolokalisierung einem oder mehreren geografischen Indikatoren eine Georeferenz zugewiesen.
		In der einfachsten Variante wird lediglich ein einziger geografischer Indikator an die Georeferenzierung übergeben, und genau eine Georeferenz zurückgegeben.
		Die Geolokalisierung muss also zu einem gegebenen geografischen Indikator eine Georeferenz bestimmen können.
		Dies führt zu einer ersten einfachen Struktur für die Georeferenz-Basis.	

		Es wird angenommen der geografische Indikator stellt immer ein eindeutiges Toponym dar.
		Des weiteren sind alle möglichen Toponyme sowie eine zugehörige Georeferenz bekannt. 
		Die Georeferenz liegt als Adresse mit Straße, Hausnummer, Postleitzahl und Ortsname vor.

		Jedem möglichen Toponym soll eine Georeferenz zugeordnet werden können. 
		Die Georeferenz-Basis muss also eine Menge von Toponymen und zugehörigen Georeferenzen beinhalten
		Dieser Aufbau entspricht einer Art Wörterbuch in dem Informationen zu einem gegebenen Referenzwert nachgeschlagen werden können.
		Im vorliegenden Fall kann also zu einem Toponym die entsprechende Georeferenz nachgeschlagen werden.
		Die Referenzwerte stellen dabei mögliche Werte für den geografischen Indikator dar. 
		In Abbildung \ref{tab:simpleStruktur} ist ein Beispiel für eine sehr simple Struktur dargestellt.

		\begin{table}[htpb]
				\caption{Beispiel für eine Georeferenz-Basis} 
				\centering
				\begin{tabular}{|c||c|}
					\hline
					Referenzwert & Georeferenz \\
					\hline\hline
					Zoo-Karlsruhe & Ettlinger Straße 6 - 76137 Karlsruhe \\
					\hline
					ZKM & Lorenzstraße 19 D - 76135 Karlsruhe \\
					\hline
					Elbphilharmonie & Dammtorwall 46 - 20355 Hamburg \\
					\hline
				\end{tabular}
				\label{tab:simpleStruktur} 
		\end{table} 

		Wird eine Abfrage auf die Georeferenz-Basis mit den geografischen Indikatoren "'Zoo-Karlsruhe"', "'ZKM"' oder "'Elbphilharmonie"' durchgeführt, kann nun eine Georeferenz zurückgeliefert werden.
		Diese simple Struktur reicht grundsätzlich aus um eine Geolokalisierung durchführen zu können.
		In dem angeführten Beispiel ist die Menge der möglichen Toponyme sehr begrenzt, aber diese kann beliebig erweitert werden.
		Damit können sehr mächtige Datenbanken erstellt werden.

		Die meisten Ortsverzeichnisse sind nach dieser Struktur aufgebaut, wenngleich sie neben der Georeferenz noch andere Informationen zu einem Toponym liefern.

		Die Form in der die Georeferenz angegeben wird ist abhängig von der Anwendung. 
		Im Beispiel \ref{tab:simpleStruktur} wurden Adressen verwendet. 
		Dazu muss das angegebene Toponym oder die Zeichenkette jedoch eine Adresse besitzen. 
		Ein See in der Wildnis Alaskas wird keine solche Adresse aufweisen.
		Aber auch die geografische Position einer Stadt oder eines Landes kann nicht durch eine Adresse beschrieben werden. 
		Die Form in der die Georeferenz angegeben wird kommt auf den jeweiligen Anwendungsfall an.
		
		\subparagraph{Mögliche Angaben für die Georeferenz}

		\begin{itemize}
		  	 \item geografische Koordinaten
		  	 \item vollständige Adressen
		  	 \item Ländernamen
		  	 \item Städtename
		  	 \item Namen für Verwaltungseinheiten 
		  	 \item Zeitzonen
		  	 \item Straßenname und Kilometerangabe
		  	 \item ...
		  \end{itemize}  

	 	Grundsätzlich sind alle Formen, welche eine direkte oder indirekte Georeferenz darstellen, denkbar.
	 	Die Angabe muss lediglich die gegebenen Anforderungen an die Geolokalisierung erfüllen.

	  	Für den Straßenverkehr ist eine Angabe einer Adresse ausreichend.
		Für Wanderungen in unerschlossenen Gebieten hingegen sind geografische Koordinaten notwendig. 

		Wie in der Liste zu erkennen ist kann die Georeferenz auch als Toponym angegeben werden.
		Wenn nun ein Toponym abgefragt wird, wird als Georeferenz ein Toponym zurückgeliefert.
		Dies macht auf den ersten Blick wenig Sinn.
		Die geografischen Indikatoren sind jedoch vorerst nur Hinweise auf eine Georeferenz.
		Liefert eine Georeferenz-Basis ein Ergebnis zurück, ist der geografische Bezug bestätigt und dem Datensatz kann eine bekannte Georeferenz zugeordnet werden.				
	
	\section{Der Nutzer-Standort und die Nutzer-Zeitzone in Twitter}

		In diesem Kapitel sollen die genutzten Informationen aus dem Twitter-Profil eingehender untersucht werden.
		Dabei werden zum Nutzer-Standort quantitative Daten erhoben um die Eignung des Nutzer-Standorts zur Geolokalisierung zu überprüfen.
		Zusätzlich wird untersucht welche Datenwerte im Nutzer-Standort vorkommen können.

		Bei der Nutzer-Zeitzone wird geprüft ob diese einen geografischen Indikator darstellt. 

		\subsection{Der Nutzer-Standort} \label{sec:nutzerStandort} 

			Der Nutzer-Standort eines Twitter-Nutzers soll als geografischer Indikator verwendet werden.
			Bei der Eingabe des Nutzer-Standortes wird vom Nutzer abgefragt, wo dieser sich befindet. 
			Die Intention der Abfrage zielt also darauf ab, dass der Nutzer einen Wert eingibt, der auf ein geografisches Objekt verweist. 
			Es ist naheliegend, dass der Nutzer seinen Standort mit Hilfe eines Toponyms angibt.
			Der Nutzer-Standort wird jedoch über ein Freitext-Feld abgefragt und direkt abgespeichert.
			Dieser muss also nicht zwangsweise Werte mit geografischem Bezug enthalten. 

			Sollte es sich bei dem eingegebenen Wert um Toponyme handeln, sind alle in Kapitel \ref{sec:ToponymeInGeografischenIndikatoren} erwähnten Probleme zu erwarten.
			Durch die unkontrollierte Eingabe sind tatsächlich alle möglichen Toponyme denkbar.
			Durch die unkontrollierte Eingabe im Nutzer-Standort können auch geografische Indikatoren mit mittelbarem geografischen Bezug auftauchen.
			Aber auch Werte die keinen geografischen Bezug aufweisen sind möglich.	

			Hier soll nun der Nutzer-Standort genauer betrachtet werden.
			Erst sollen einige allgemeine Kennzahlen zum Nutzer-Standort betrachtet werden.
			Hecht et al. haben in \cite{Hecht2011} den Nutzer-Standort eingehend untersucht, die Ergebnisse sollen hier aufgegriffen werden.
			Neben den Ergebnissen von Hecht et al. werden aber auch eigene Ergebnisse präsentiert.
			Danach wird der Inhalt des Nutzer-Standortes genauer betrachtet werden.

			\subsubsection{Geografischer Bezug des Nutzer-Standorts} 
				
				Hecht et al. konnten den Datenwerten in den Nutzer-Standorten in 80\% Prozent der Fälle einen geografischen Bezug feststellen.
				In den restlichen 20\% der Fälle konnte im Nutzer-Standort kein geografischer Bezug festgestellt werden. 
				Die Untersuchung wurde manuell vorgenommen und es durften alle zur Verfügung stehenden Mittel zur Analyse der Daten verwendet werden. 
				Hecht et al. haben allerdings ausschließlich Daten untersucht die nachweislich aus den USA stammten. 
				Es wurden dazu 10000 Nutzer-Standorte analysiert.

				Im Rahmen der vorliegenden Arbeit wurde der Nutzer-Standort von 1000 Twitter-Nutzern ebenfalls manuell untersucht. 
				Dabei wurde keinerlei Einschränkung zur Herkunft der Twitter-Nutzer gemacht.
				Um zu prüfen ob ein geografischer Bezug vorliegt wurden Ortsverzeichnisse von Google-Maps und Geonames.org verwendet.
				Mit Hilfe des geonames.org Datensatzes wurde dann eine Georeferenz zugeordnet.
				Sowohl Google-Maps als auch geonames.org liefern Ergebnisse zu Nutzer-Standorten in verschiedenen Alphabeten und Sprachen.
				Nutzer-Standorte in unbekannten Alphabeten oder Sprachen konnten somit ebenfalls untersucht werden.
				Es konnte dabei in 76\% der Fälle ein geografischer Bezug nachgewiesen werden. 

				In den restlichen 24\% der Fälle konnte kein geografischer Bezug mit Hilfe der Datenbanken nachgewiesen werden. 
				Dies bedeutet nicht, dass grundsätzlich kein geografischer Bezug vorhanden ist. 
				Es konnte lediglich anhand der genutzten Quellen kein geografischer Bezug hergeleitet werden.
				Beispielsweise wurde "'Swag City"' nicht zugewiesen, denn der Spitzname für die Stadt "'Ann Arbor"' war in den Datenbanken nicht hinterlegt. 

				
			\subsubsection{Genauigkeit der geografischen Angaben}

				In ca. 80\% der Fälle kann bei einer Angabe des Nutzer-Standortes davon ausgegangen werden, dass dieser unmittelbaren geografischen Bezug hat.
				Da der Nutzer beliebige Eingaben machen kann, ist nicht sicher wie genau ein solcher unmittelbarer geografischer Bezug ist. 
				
				Hecht et al. analysierten ihre Daten darauf wie genau die Nutzer ihren Standort angeben.
				Dabei ist wiederum zu beachten, dass die Daten aus den USA stammen und deshalb die Verwaltungseinheiten der USA zugrunde gelegt wurden.
				
				Die Genauigkeiten der Standortangabe nach Hecht et al. sind in \ref{tab:genauigkeitenHecht} angegeben. 

				\begin{table}[htpb]
				\caption{Genauigkeit Standortangabe Hecht et al.} 
				\centering
				\begin{tabular}{|c||c|}
					\hline
					Anteil in \% gerundet & geografische Hierarchieebene \\
					\hline\hline
					64\% & Stadt \\
					\hline
					20\% & Staat \\
					\hline
					ca. 8\% & Intrastate \\
					\hline
					ca. 5 \% & Land \\
					\hline
				\end{tabular}
				\label{tab:genauigkeitenHecht} 
				\end{table} 

				Die restlichen 13\% entfallen auf Interstate Regionen, Nachbarschaften und konkrete Adressen. 
				Interstate Regionen sind Regionen die sich über mehrere Staaten hinwegziehen. 
				Beispiele für Interstate Regionen sind "'Central United States"' oder "'West-Coast"'.
				Nachbarschaften (Neighbourhoods) sind oft Stadtteile wie "'Harlem"' oder "'Bronx"' in New York.

				Bei den eigenen Untersuchungen wurden die geografischen Hierarchieebenen aus Unterkapitel \ref{sub:geografischeHierarchie} zugrunde gelegt.
				Die Genauigkeiten der Standortangabe aus den eigenen Untersuchungen sind in Tabelle \ref{tab:genauigkeitenEigene} angegeben.

				\begin{table}[htpb]
				\caption{Genauigkeit Standortangabe eigene Untersuchungen} 
				\centering
				\begin{tabular}{|c||c|}
					\hline
					Anteil in \% gerundet & geografische Hierarchieebene \\
					\hline\hline
					77\% & Stadt \\
					\hline
					8\% & Verwaltungseinheit erster Ordnung  \\
					\hline
					5\% & Verwaltungseinheit zweiter Ordnung  \\
					\hline
					10 \% & Land \\
					\hline
				\end{tabular}
				\label{tab:genauigkeitenEigene} 
				\end{table} 


				Es ist also nicht sicher welche geografische Hierarchieebene im Nutzer-Standort angegeben wird. 

				Die unterschiedlichen Ergebnisse zwischen der eigenen Untersuchung und den Ergebnissen von Hecht et al. können dadurch Zustande kommen, dass in der vorliegenden Arbeit Twitter-Nutzer aus der ganzen Welt untersucht wurden.
				Aber auch der zeitliche Abstand zwischen den beiden Untersuchungen kann dafür verantwortlich sein.  

			\subsubsection{Stimmt der tatsächliche Standort mit dem angegeben überein?}

				Diese Frage ist grundsätzlich nur schwer zu beantworten.
				Die einzige Möglichkeit besteht darin Tweets mit geografischen Angaben zu untersuchen.
				Dabei können aber Probleme auftreten. 
				
				Der Nutzer-Standort gibt oft nicht den Aufenthaltsort sondern den Heimatort an. 
				Befindet sich der Nutzer auf Reisen oder arbeitet er in einer anderen Stadt, stimmen die geografischen Koordinaten des Tweets nicht mit den Koordinaten des angegebenen Ortes überein.
				Dies könnte in einige Fällen gelöst werden indem mehrere Tweets desselben Nutzers über einen längeren Zeitraum untersucht werden. 
				Um den eigentlichen Wohnort sollte dadurch eine Häufung an abgesetzten Tweets auftreten.
				Damit kann ein genauerer Standort bestimmt werden.

				Der Nutzer kann aber auch absichtlich einen falschen Standort angeben oder bei einem Umzug schlicht vergessen haben den Nutzer-Standort anzupassen.

				In der durchgeführten Untersuchung wurde auch die Entfernung der manuell bestimmten Stadt zu den tatsächlichen Tweet Koordinaten bestimmt.
				Auf Städteebene wurden 60\% der Tweets in weniger als 24 Kilometern Entfernung von der manuell ermittelten Stadt abgesetzt.
				25\% der Tweets sind aber mehr als 239 Kilometer von der manuell ermittelten Stadt entfernt. 
				Der Median liegt bei 11 Kilometern.
				In Tabelle \ref{tab:distancesP} sind weitere Informationen über die Distanzen zusammengetragen.

				\begin{table}[h]
				\centering
				\caption{Distanzen}
				\label{tab:distancesP}
				\begin{tabular}{|l|l|}
				\hline
				Median       & 11,5  \\ \hline
				0,25 Quantil & 3,1   \\ \hline
				0,50 Quantil & 11,5  \\ \hline
				0,60 Quantil & 24,3  \\ \hline
				0,75 Quantil & 239,0 \\ \hline
				\end{tabular}
				\end{table}

				%6625.059088      11491.29743       24281.1066      106942.0694


			\subsubsection{Partieller geografischer Bezug des Datenwertes im Nutzer-Standort} \label{subsec:partiellerGeografischerBezug} 

				In einigen Nutzer-Standorten konnte festgestellt werden, dass nur Teile der Einträge geografischen Bezug haben. 
				Die Nutzer geben weitere Informationen an, diese haben aber keinen geografischen Bezug. 
				In der folgenden Liste sind einige Einträge von Nutzer-Standorten aufgelistet. 

				\begin{enumerate}
					\item 11th Dimension | California
					\item between here and there - Miami
				\end{enumerate}

				Im ersten Fall kann für "'California"' ein unmittelbarer geografischer Bezug festgestellt werden.
				"'11th"' Dimension hat hier offensichtlich keinen geografischen Bezug.
				Im zweiten Fall ist die Aussage "'between here and there"' ohne geografischen Bezug.
				"'Miami"' kann jedoch als Bezug zur Stadt Miami in Florida gebracht werden.
				
				Es können also auch nur Teile des Nutzer-Standorts für eine Georeferenzierung von Nutzen sein.

			\subsubsection*{Widersprüchliche Datenwerte im Nutzer-Standort} \label{subsec:wiederspruechlicheBezuege} 

				Es existieren auch Einträge für Nutzer-Standorte welche mehrere widersprüchliche Angaben machen.
				Dies bedeutet es werden zwei oder mehr Datenwerte mit geografischem Bezug angegeben, die auf unterschiedliche Georeferenzen verweisen.

				Auch hier sollen einige Beispiele genannt werden:

				\begin{itemize}
					\item Bolton\textbackslash/Leigh
					\item Liverpool\textbackslash/London
					\item  Balikesir \textbackslash/ Izmir	
				\end{itemize}							
					
				In diesen Beispielen sind jeweils zwei Städte angegeben.
				Bolton und Leigh liegen 14km auseinander.
				Liverpool und London trennen ca. 350km.
				Balikesir und Izmir ca. 180km.

				Es kann nun spekuliert werden wieso der Nutzer zwei Städte angibt.
				Ist er in einer Stadt aufgewachsen und lebt momentan in der anderen?
				Pendelt er zwischen den Städten um zu arbeiten?

				Wie dem auch sei, es kann nicht eindeutig entschieden werden in welcher Stadt sich der Nutzer aufhält.

			\subsubsection*{Geografische Hierarchien im Nutzer-Standort}

				Es ist auch möglich, dass im Nutzer-Standort teile einer geografischen Hierarchie angegeben sind.
				Beispielsweise die Angabe einer Stadt in Kombination mit einem Land.
				
				In den USA wird beispielsweise oft die Stadt und der zugehörige Bundesstaat angegeben.
				In Brasilien hingegen wird oft ein Bundesstaat und das Land angegeben.
				Hier einige Beispiele:

				\begin{itemize}
					\item Los Angeles, California
					\item Mato Grosso, Brazil
					\item Bronx, New York	
				\end{itemize}		

				Im ersten Beispiel handelt es sich um die Stadt Los Angeles und den US-Bundesstaat Kaliforniern.
				Im zweiten Beispiel wird zuerst ein brasilianischer Bundesstaat angegeben und danach das Land.
				Im dritten Beispiel wird ein Stadtteil von New York angegeben und dann die Stadt oder der US-Bundesstaat. 
				Da der US-Bundesstaat denselben Namen hat wie die Stadt, und beide in einer Hierarchiebeziehung mit Bronx stehen, kann hier nicht unterschieden werden was gemeint ist.
				
			\subsubsection{Domänenspezifische Toponyme im Nutzer-Standort} 

				In sozialen Netzwerken können sich eigene Begriffe und Formulierungen etablieren. 
				Diese sind im allgemeinen nicht bekannt.

				Im Twitter-Umfeld haben sich in den letzten Jahren einige spezielle Begriffe und Formulierungen zur Verwendung in Tweet-Texten etabliert. 
				Das im Twitter-Umfeld auch spezielle Toponyme verwendet werden, kann nicht gänzlich ausgeschlossen werden. 

				Ein Beispiel hierfür ist "'Bieberville"', welches in den untersuchten Daten von Hecht et al. öfter vorkommt.
				"'Bieberville"' wird abgeleitet von dem Pop-Star Justin Bieber.	
				Twitter wird oft als "'Bieberville"' bezeichnet.
				Da der Pop-Star in Twitter sehr aktiv ist und deshalb viele seiner Fans auch in Twitter aktiv sind hat sich dieser Name etabliert.
				Unter diesem Gesichtspunkt hätte "'Bieberville"' keinen geografischen Bezug.
				Sucht man allerdings im Internet nach "'Bieberville"' stößt man auf einen Imbiss in Groß-Bieberau.
				"'Bieberville"' kann also durchaus einen geografischen Bezug haben, wenngleich es im Twitter-Umfeld nicht als solcher benutzt wird. 
				Ein Nutzer-Standort der in einem Land kein Toponym darstellt, kann in einem anderen durchaus ein Toponym sein.
				Ist in einem Ortsverzeichnis beispielsweise "'Bierberville"' als Bezeichnung für den Imbiss in Groß-Bieberau hinterlegt, würde dieser als Georeferenz zugeordnet werden, was im Umfeld von Twitter in einem Großteil der Fälle falsch wäre.

				Solche Begriffe und Formulierungen können nur sehr schlecht mit einem Ortsverzeichnis zu Georeferenzen zugeordnet werden. 

		\subsection{Die Nutzer-Zeitzone}

			In Kapitel \ref{sec:ToponymeInGeografischenIndikatoren} wurde auf die Probleme bei der Verwendung von Toponymen als geografische Indikatoren eingegangen.
			Dabei wurde die Doppel- und Mehrdeutigkeit von Toponymen betrachtet.
			Bei der Verwendung des Nutzer-Standortes als geografischen Indikator kann dieses Problem auch auftauchen. 

			Um diesem Problem zu begegnen soll die Nutzer-Zeitzone als weiterer geografischer Indikator hinzugezogen werden.
			Zunächst sollen die generellen Eigenschaften der Nutzer-Zeitzone erläutert werden bevor erklärt wird wie die Nutzer-Zeitzone das Problem der Mehrdeutigkeit von Toponymen beheben kann.

			\subsubsection{Eigenschaften der Nutzer-Zeitzone}

				Die Nutzer-Zeitzone stellt einen geografischen Indikator dar.
				Sie beschreibt eine eindeutige geografische Region auf dem Globus und somit hat direkten geografischen Bezug.
				Dabei entsprechen die Grenzen der Region nicht unbedingt den Landesgrenzen oder den Grenzen sonstiger Verwaltungseinheiten. 
				In Abbildung \ref{img:timezones} sind die Zeitzonen der Erde dargestellt.

				\begin{figure}[h!]
					\begin{center}
						\includegraphics[scale=0.5]{zeitzonen_weltkarte.jpg}
						\caption{Zeitzonen der Erde.}
						\label{img:timezones}
					\end{center}
				\end{figure}	
				%Quelle: http://www.zeitzonen.de/images/frontend/mod\_tz\_map/zeitzonen\_weltkarte.gif

				Die Nutzer-Zeitzone kann in Twitter über eine Liste gewählt werden.
				Der Wert der Nutzer-Zeitzone stellt deshalb garantiert eine Zeitzone dar.
				Es ist dem Nutzer nicht möglich einen Wert einzugeben der nicht einer Zeitzone entspricht.

				Allerdings ist nicht gesichert, das der angegebene Wert auch der Zeitzone entspricht in der sich der Nutzer aufhält.
				Der Nutzer könnte eine bewusste Fehleingabe machen oder aber die Zeitzone nicht wählen.
				Der Standardwert der Nutzer-Zeitzone ist "'Pacific Time (US and Canada)"'.

				In Abbildung \ref{img:gephiTimezones} wurden Tweets anhand ihres Längen- und Breitengrades platziert.
				Jeder Punkt in der Abbildung entspricht einem Tweet.
				Es wurden nur Tweets aus den USA ausgewählt.
				Anhand der Nutzer-Zeitzone zu jedem Tweet wurden die Punkte eingefärbt.
				Folgende Farben wurden gewählt:

				\begin{itemize}
				 	\item Pacific Time Blau
				 	\item Eastern Time	Rot
				 	\item Central Time Grün
				 	\item Mountain Time Pink 
				 \end{itemize} 

				 Die Zeitzonen sind durch die Farben gut zu erkennen. 
				 Lediglich die dünn besiedelte Region der Mountain Time kann nur an einigen Ballungszentren erkannt werden. 
				 Grundsätzlich scheint der Großteil der Angaben aber korrekt zu sein.

			\subsubsection{Auflösen von Doppeldeutigkeiten}

				Ist ein Toponym Doppel- oder Mehrdeutig kann nicht entschieden werden welches geografische Objekt zugeordnet werden soll.
				Liegen die beiden geografischen Objekte allerdings in zwei unterschiedlichen Zeitzonen und der Nutzer hat eine Nutzer-Zeitzone angegeben kann die Doppeldeutigkeit aufgelöst werden.
				Es muss lediglich die Nutzer-Zeitzone betrachtet werden.
				Somit kann dem Nutzer eine korrekte Georeferenz zugewiesen werden.
				Voraussetzung hierfür ist natürlich, dass die geografischen Objekte in zwei unterschiedlichen Zeitzonen liegen und die Nutzer-Zeitzone angegegeben ist.

		\subsection{Fazit} 

			\todo{Fazit checken: HIER} 
			In ca. 80\% der Fälle kann der Nutzer-Standort tatsächlich einen Hinweis auf eine Georeferenz liefern.
			Der Nutzer-Standort kann also in vielen Fällen einen Hinweis auf die Herkunft des Twitter-Nutzers geben.
			Der Nutzer-Standort eignet sich somit gut als geografischer Indikator. Allerdings sind die Eingaben nicht standardisiert und können somit nicht ohne Vorverarbeitung verwendet werden.
			Wie oben dargestellt kann der Nutzer-Standort nur partiellen geografischen Bezug haben oder mehrere Informationen verschiedener geografischer Hierarchieebenen beinhalten. 
			Auch können die Datenwerte im Nutzer-Standort keinerlei geografischen Bezug aufweisen.
			Dies macht es grundsätzlich schwierig die Datenwerte im Nutzer-Standort direkt als geografischen Indikator zu verwenden.
			
			Ist ein geografischer Bezug des Nutzer-Standortes nachzuweisen, handelt es sich bei dem Eintrag in den meisten Fällen um ein Toponym.
			Durch die durchgeführte Untersuchung konnte gezeigt werden, dass ca. 76\% der Nutzer-Standorte mit einem geografischen Bezug, auf Toponyme zurückzuführen sind.

			Zusammenfassend kann gesagt werden, dass der Nutzer-Standort häufig einen geografischen Bezug aufweist und es sich in diesen Fällen um Toponyme handelt.
			Aufgrund der völlig freien Eingabe durch den Nutzer ergeben sich bei der Auswertung der Nutzer-Standorte jedoch einige Probleme die gelöst werden müssen.

			Grundsätzlich kann der Nutzer-Standort als geografischer Indikator genutzt werden. 
			Durch die freie Eingabe ist allerdings nicht sicher ob die Datenwerte des Nutzer-Standorts geografischen Bezug aufweisen oder nicht.
			Es ist möglich das diese sowohl unmittelbaren als auch mittelbaren geografischen Bezug aufweisen.
			Hinzu kommen die Probleme bei der Verwendung von Toponymen als geografische Indikatoren aus Kapitel \ref{sec:ToponymeInGeografischenIndikatoren}.
			Durch die mögliche Angabe von mehreren geografischen Indikatoren in einem Nutzer-Standort ist es sinnvoll vor der Geolokalisierung eine Vorverarbeitung durchzuführen welche den Nutzer-Standort in mehrere potenzielle geografische Indikatoren aufteilt. 
			Dadurch sollen möglichst viele zusätzliche Informationen aus dem Nutzer-Standort extrahiert werden.
			Zudem können so Datenwert mit geografischem Bezug von Datenwerten ohne geografischen Bezug getrennt untersucht werden.
			Sollten Mehrdeutigkeiten im Nutzer-Standort auftauchen können diese teilweise durch die Hinzunahme der Nutzer-Zeitzone aufgelöst werden.

			Eine Lösung besteht darin die im Twitter-Umfeld genutzten Datenwerte für den Nutzer-Standort zu lernen.
			Damit ist man nicht abhängig von Ortsverzeichnissen, welche potenziell unvollständig sind oder in denen domänenspezifische Begriffe fehlen.
			Auch geografische Indikatoren mit mittelbarem geografischen Bezug könnten dadurch eingelernt werden.

	\section{Verfahren zum einlernen geografischer Indikatoren am Beispiel von Twitter} 

		Aus einer Tweet-Sammlung sollen die genutzten geografischen Indikatoren und deren Zuordnung zu einer Georeferenz automatisch gelernt werden.
		Es soll eine Georeferenz-Basis erzeugt werden, welche es ermöglicht dem genutzten geografischen Indikatoren eine Georeferenz zuzuweisen. 

		Der Vorteil besteht darin, dass eine domänenspezifische Georeferenz-Basis geschaffen wird welche potenziell mehr geografische Indikatoren zuordnen kann als ein normales Ortsverzeichnis.
		Es können dadurch domänenspezifische Eigenheiten berücksichtigt werden. 
		Auch domäneninterne Begriffe sollen hierdurch gelernt werden können. 

		Es ist zunächst nötig die genutzten geografischen Indikatoren einer Vorverarbeitung zu unterziehen. 
		Insbesondere aus dem Nutzer-Standort können durch eine Vorverarbeitung weitere Informationen extrahiert werden.
		Des weiteren wird die in Abschnitt \ref{sec:generelleStruktur} vorgestellte Struktur der Georeferenz-Basis angepasst und erweitert. 
		Dabei wird am grundsätzlichen Prinzip nichts geändert, es wird nach wie vor einem Referenzwert eine Georeferenz zugewiesen.
		Die Referenzwerte leiten sich dabei aus den geografischen Indikatoren ab. 

		\subsection{Vorverarbeitung des Nutzer-Standortes und der Nutzer-Zeitzone} \label{subsec:VorverarbeitungStandortZeitzone} 
			
			Ziel ist es aus dem Nutzer-Standort möglichst viele Informationen zu extrahieren und etwaige Probleme zu beseitigen.
			In der folgenden Liste sind einige Nutzer-Standorte angegeben. 
			Anhand dieser Liste sollen die Vorverarbeitungsschritte demonstriert werden.

			\begin{multicols}{2}
			\begin{enumerate}
				\item Bélem-PA
				\item West Sussex, England
				\item South Florida
				\item Pitmedden,  Scotland, UK
				\item Mato Grosso \& Rio de Janeiro
				\item -****-
				\item USA \textbackslash/ Los Angeles
				\item Nottingham\textbackslash/London
				\item Los Angeles, USA
				\item I $\heartsuit$ New York 
				\item $\dagger\textasciitilde$ Los Angeles$\textasciitilde\dagger$
				\item earth-sea
				\item In front of the computer
				\item 11th Dimension | California
				\item York
				\item York
			\end{enumerate}
			\end{multicols}
				
			\subsubsection{Eliminierung von Sonder- und Satzzeichen} 

				Es fällt auf, dass oft Sonder- und Satzzeichen verwendet werden. 
				Beispielsweise als Trenner zwischen Toponymen unterschiedlicher geografischer Hierarchieebenen wie bei "'West Sussex, England"', "'USA \textbackslash/ Los Angeles"' oder "'Bélem-PA"'.
				Das Trennzeichen wird dabei nicht einheitlich verwendet.  
				Es kann deshalb nicht entschieden werden ob ein Satzzeichen als Trenner zweier Hierarchieebenen genutzt wird oder nicht.
				Bei "'USA \textbackslash/ Los Angeles"' wird \textbackslash/ als Trenner für Hierarchieebenen verwendet bei "'Nottingham\textbackslash/London"' werden zwei Städte angegeben.
				Es ist also insbesondere nicht klar welcher Zusammenhang zwischen den Toponymen, die durch ein Zeichen getrennt sind, besteht. 

				Bei "'I $\heartsuit$ New York "' werden Sonderzeichen zum ausdrücken von Emotionen genutzt.
				In "'$\dagger\textasciitilde$ Los Angeles$\textasciitilde\dagger$"' werden Sonderzeichen als Dekoration genutzt.
				Einige Nutzer-Standorte bestehen ausschließlich aus Sonder- und Satzzeichen.
				
				Grundsätzlich ist es aufgrund der Vielfalt schwierig definitiv zu entscheiden ob Satz- und Sonderzeichen einen Mehrwert bieten bei der Georeferenzierung. 
				Es gibt Fälle in denen Sonder- oder Satzzeichen Bestandteil des Toponyms sind.
				Ein Beispiel hierfür wäre das "'3. Arrondisement"' in Paris, das weglassen des Punktes würde hier aber zu keinen Problemen führen.
				Das hinzufügen von Satz- und Sonderzeichen kann allerdings mehr Probleme mit sich bringen als es Vorteile bringt.
				Es sollen deshalb in einem ersten Vorverarbeitungsschritt alle Sonder- und Satzzeichen entfernt werden. 

				Liste nach dem entfernen von Sonder- und Satzzeichen:

				\begin{multicols}{2}
					\begin{enumerate}
						\item Bélem PA
						\item West Sussex England
						\item South Florida
						\item Pitmedden Scotland UK
						\item Mato Grosso Rio de Janeiro
						\item 
						\item USA Los Angeles
						\item Nottingham London
						\item Los Angeles USA
						\item I New York 
						\item Los Angeles
						\item earth sea
						\item In front of the computer
						\item 11th Dimension California
						\item York
						\item York
					\end{enumerate}
				\end{multicols}

				Der Wert 6 existiert nun nicht mehr, der Wert ist leer und wird somit nicht weiter betrachtet.

				Der Vorteil besteht darin, dass unnötige Sonder- und Satzzeichen entfernt werden und die entstandenen Werte einfacher weiter verarbeitet werden können.

			\subsubsection{Zusammenfassen von Toponymen}

				In diesem Schritt sollen Toponyme, welche aus zwei oder mehr Teilen bestehen mit Hilfe eines Ortsverzeichnisses zusammengefasst werden. 
				Dies kann nur für bekannte Toponyme durchgeführt werden.
				Damit bilden beispielsweise "'Los"' und "'Angeles"' eine Einheit. 
				Dies soll mit einem + Zeichen gekennzeichnet werden.

				Daraus resultiert:

				\begin{multicols}{2}
					\begin{enumerate}
						\item Bélem PA
						\item West+Sussex England
						\item South Florida
						\item Pitmedden Scotland UK
						\item Mato+Grosso Rio+de+Janeiro
						\item USA Los+Angeles
						\item Nottingham London
						\item Los+Angeles USA
						\item I New+York 
						\item Los+Angeles
						\item earth sea
						\item In front of the computer
						\item 11th Dimension California
						\item York
						\item York
					\end{enumerate}
				\end{multicols}

				In diesem Schritt wird insbesondere keine Georeferenzierung vorgenommen. 
				Dieser Schritt dient dazu, möglichst früh vorhandenes Wissen über Toponyme einzubeziehen.
				Im wesentlichen sollen die Werte hiermit für die nächsten Verarbeitungsschritte vorbereitet werden.

			\subsubsection{Alphanumerische Sortierung}

				In diesem Schritt sollen die Werte alphanumerisch sortiert werden. 
				Dadurch ist die Reihenfolge in der die Werte angegeben werden unerheblich.

				Nach der Sortierung liegt folgende Tabelle vor:

				\begin{multicols}{2}
					\begin{enumerate}
						\item Bélem PA
						\item England West+Sussex
						\item Florida South
						\item Pitmedden Scotland UK
						\item Mato+Grosso Rio+de+Janeiro
						\item Los+Angeles USA
						\item London Nottingham
						\item Los+Angeles USA
						\item I New+York 
						\item Los+Angeles
						\item earth sea
						\item computer front In of the 
						\item 11th California Dimension 
						\item York
						\item York
					\end{enumerate}
				\end{multicols}

				Die Werte 6 und 8 sind nun gleich. 
				Durch die Sortierung werden Werte mit gleichem Inhalt aber unterschiedlicher Reihenfolge angeglichen.
				Durch das zusammenfassen der Toponyme im vorherigen Schritt werden bekannte Toponyme nicht getrennt.
				Es wird eine unnötige Fragmentierung der Werte vermieden.

				Dieser Schritt stellt allerdings einen Kompromiss dar.
				Es werden zwar Werte mit gleichem Inhalt und unterschiedlicher Reihenfolge angeglichen.
				Aber es werden auch potenzielle Toponyme, die aus mehreren Teilen bestehen, auseinandergezogen.
				Aus "'Motor City Michigan USA"' würde "'City Michigan Motor USA"' entstehen.
				Der Zusammenhang zwischen Motor und City wäre nicht mehr vorhanden und könnte daraus auch nicht wiedergewonnen werden.

			\subsubsection{Erzeugung von N-Grammen}

				Es sollen nun N-Gramme bis zum Grad 3 erzeugt werden. 
				Dieses Vorgehen löst gleich mehrere Probleme.

				Zum ersten können sowohl geografische Indikatoren als auch Werte die kein geografischen Indikator darstellen in den Nutzer-Standorten vorhanden sein.
				Durch die Erzeugung von N-Grammen können diese getrennt voneinander betrachtet werden.
				Es löst das Problem des partiellen geografischen Bezugs des Nutzer-Standortes aus \ref{subsec:partiellerGeografischerBezug} in der Hinsicht, dass die Werte für die weitere Verarbeitung getrennt betrachtet werden können.

				Zum zweiten können in einem Nutzer-Standort mehrere geografische Indikatoren enthalten sein.  
				Der Wert "'Pitmedden Scotland UK"' enthält mit "'UK"' das Land, mit "'Scottland"' den Landesteil und mit "'Pitemedden"' eine Stadt. 
				Mit der Georeferenz aus dem zugehörigen Tweet kann nun allen drei Werten eine Georeferenz zugeordnet werden.

				Aber auch zwei verschiedene Städte wie "'Nottingham\textbackslash/London"' können in einem Wert vorkommen.
				Diese werden zu "'Nottingham\textbackslash/London"', "'Nottingham"' und "'London"'.
				Wird hier wiederum beiden Werten die geografische Koordinate zugeordnet können drei Fälle auftreten.
				Erstens: Der Nutzer war in keiner der beiden Städte als er den Tweet abgesetzt hat. 
				Damit sind beide Zuordnungen unbrauchbar.
				Zweitens: Er war in einer der beiden Städte, dann ist zumindest einer der entstandenen Datensätze brauchbar.
				Dies löst das Problem aus \ref{subsec:wiederspruechlicheBezuege} in der Hinsicht, dass die Werte für die weitere Verarbeitung getrennt betrachtet werden können.

				Besteht allerdings eine Beziehung der Werte zueinander, kann diese durch Bi- und Trigramme abgebildet werden.
				Aus "'Pitmedden Scotland UK"' wird "'Pitmedden Scotland"', "'Scotland UK"' und "'Pitmedden Scotland UK"' erzeugt.

				Dieser Schritt soll nur an einigen ausgewählten Beispielen aus der Liste erfolgen.
				Die Bestandteile der N-Gramme werden zur Verdeutlichung mit \textless \textgreater gekennzeichnet in späteren Beispielen wird dies weggelassen, da durch das zusammenfassen von Werten mit einem plus klar ist welches die Elemente des NGramms darstellen

				\begin{multicols}{2}
					\begin{enumerate}
						\item \textless England\textgreater   \textless West+Sussex\textgreater  
						\item \textless England\textgreater  
						\item \textless West+Sussex\textgreater  
						\item \textless Mato+Grosso\textgreater   \textless Rio+de+Janeiro\textgreater  
						\item \textless Rio+de+Janeiro\textgreater  
						\item \textless Mato+Grosso\textgreater  
						\item \textless 11th\textgreater   \textless California\textgreater   \textless Dimension\textgreater   
						\item \textless 11th\textgreater   \textless California\textgreater  
						\item \textless California\textgreater   \textless Dimension\textgreater   
						\item \textless 11th\textgreater  
						\item \textless California\textgreater  
						\item \textless Dimension\textgreater   
						\item \textless York\textgreater  
						\item \textless York\textgreater  
					\end{enumerate}
				\end{multicols}
				Der Wert 7 ist ein Trigramm.
				Bei den Werten 1,4,8 und 9 handelt es sich um Bigramme. 
				Die Werte von 2,3,5,6,10,11 und 12 sind Unigramme.				
				Auch hier entsteht aufgrund des zusammenfassens bekannter Toponyme keine Fragmentierung, da zusammengehörige Toponyme gemeinsam betrachtet werden.

				In diesem Schritt werden aus dem Nutzer-Standort mehrere potenzielle geografische Indikatoren erzeugt die als Referenzwerte genutzt werden könne.
				Bevor diese als Referenzwerte genutzt werden soll noch die Nutzer-Zeitzone hinzugefügt werden.

			\subsubsection{Hinzufügen der Zeitzone}

				Es soll an dieser Stelle die Zeitzone hinzugefügt werden.
				Da die Zeitzone eine begrenzte Anzahl an Werten darstellt und diese vom Nutzer nicht frei eingegeben werden können muss hier keine weitere Vorverarbeitung vorgenommen werden.

				Jeder Wert der in der aktuellen Liste vorkommt soll einmal mit und einmal ohne Zeitzone existieren. 
				Damit wird garantiert, dass eingelernte Referenzwerte die eine falsche Zeitzone aufweisen, trotzdem berücksichtigt werden können. 
				Beispielsweise ist die Nutzer-Zeitzone "'Pacific Time (US \& Canada)"' für den Nutzer-Standort "'Jakarta"' nicht korrekt.
				Aus dieser Kombination würden die Referenzwerte "'Jakarta Pacific Time (US \& Canada)"' und "'Jakarta"' entstehen. 
				Bei einer Abfrage von "'Jakarta"' kann dann der Referenzwert "'Jakarta"' genutzt werden. 
				Würde allerdings nur die Kombination "'Jakarta Pacific Time (US \& Canada)"' als Referenzwert existieren würde keine Georeferenz zurückgeliefert werden können.

				Die Elemente der Zeitzonen werden wiederum mit einem Plus zusammengfasst um deutlich zu machen, dass es sich um ein Element eines NGramms handelt.
				Um die Nutzer-Zeitzone von den aus dem Nutzer-Standort generierten Elementen unterscheiden zu können, wird die Nutzer-Zeitzone kursiv geschrieben.
				Auch hier wird die Liste weiter eingeschränkt und es werden lediglich noch zwei Beispiele betrachtet.
				\begin{multicols}{2}
					\begin{enumerate}
						\item England West+Sussex
						\item  England  
						\item  West+Sussex  
						\item  England    West+Sussex   \textit{London}
						\item  England   \textit{London}
						\item  West+Sussex   \textit{London}
						\item  11th    California    Dimension    
						\item  11th    California  
						\item  California    Dimension   
						\item  11th  
						\item  California  
						\item  Dimension   
						\item  11th  California    Dimension   \textit{Pacific+Time+US+Canada}
						\item  11th    California   \textit{Pacific+Time+US+Canada}
						\item  California    Dimension   \textit{Pacific+Time+US+Canada}
						\item  11th   \textit{Pacific+Time+US+Canada}
						\item  California   \textit{Pacific+Time+US+Canada}
						\item  Dimension   \textit{Pacific+Time+US+Canada}
						\item York
						\item  York   \textit{London}
						\item York
						\item  York   \textit{Eastern+Time}
					\end{enumerate}	
				\end{multicols}
				Mit Hilfe der Zeitzone können nun auch die beiden letzten Einträge unterschieden werden. 
				Zum einen "'York"' in England zum anderen "'York"' in den USA. 
				Dies löst das Problem der Mehrdeutgkeiten von Toponymen. 
				Mit Hilfe der zusätzlichen Zeitzone können geografische Objekte, zumindest wenn sie in zwei verschiedenen Zeitzonen liegen, unterschieden werden.

			\subsubsection{Fazit} 

				Nach der Vorverarbeitung liegen eine Menge von potenziellen geografischen Indikatoren mit zugehörigen geografischen Koordinaten vor.
				Bei der Vorverarbeitung wurden einige Probleme des Nutzer-Standortes und bei der Verwendung von Toponymen beseitigt.

				Die so erzeugten potenziellen geografischen Indikatoren können nun in der Georeferenz-Basis als Referenzwerte gespeichert werden.
				Mit der so erzeugten Georeferenz-Basis ist es grundsätzlich möglich eine Georeferenzierung durchzuführen. 
				Allerdings wird jedem potenziellen geografischen Indikator eine Georeferenz zugeordnet.
				Das ist grundsätzlich problematisch, da Referenzwerten die keinen geografischen Bezug aufweisen eine Georeferenz zugeordnet wird. 
				Dies kann bei der Georeferenzierung zu Fehlern führen.
				Es sollte entschieden werden können ob der Referenzwert einen geografischen Bezug hat oder nicht. 

				Des weiteren können zu einem Referenzwert beliebig viele Datensätze existieren, selbst wenn diese auf denselben Ort verweisen. 
				Bei einer Abfrage an die Datenbank werden potenziell große Mengen an Datensätzen zurückgeliefert die alle auf dieselbe Georeferenz verweisen.

		\subsection{Absolute Häufigkeiten}

			Es sollen nun absolute Häufigkeiten in der Georeferenz-Basis eingeführt werden.
			Die absoluten Häufigkeiten sollen angeben wie oft eine Kombination aus Referenzwert und Georeferenz in der Georeferenz-Basis vorhanden ist.
			Dadurch werden Duplikate in der Georeferenz-Basis vermieden.
			Zusätzlich kann ermittelt werden ob ein Referenzwert an einer bestimmten Position gehäuft auftritt.

			Beim abspeichern eines neuen Datensatzes soll nun zunächst geprüft werden ob dieser bereits in der Georeferenz-Basis vorhanden ist. 
			Ist dies der Fall, so wird die absolute Häufigkeit des entsprechenden Eintrags um 1 erhöht.
			Ist der Datensatz noch nicht gespeichert so wird ein neuer Datnesatz angelegt und die absolute Häufigkeit mit 1 initialisiert.

			Die absolute Häufigkeit misst damit wie oft ein Referenzwert an einer geografischen Position vorkommt.
			Es ist zu erwarten, dass ein Referenzwert mit geografischem Bezug gehäuft an einer bestimmten geografischen Position oder Region auftritt.
			Während Referenzwerte die keinen geografischen Bezug haben sehr verteilt oder nur sehr selten auftreten. 

			Betrachtet man die Tweet-Sammlung kann beim Vergleich der Georeferenzen ein Problem entstehen.
			Die Georeferenz aus der Tweet-Sammlung besteht aus den geografischen Koordinaten des zugehörigen Tweets.
			Die geografische Position wird zumeist mit Hilfe von GPS-Modulen mobiler Endgeräte wie Smartphones bestimmt. 
			Diese können eine Position oft auf wenige Meter genau bestimmen.
			Das bedeutet, zwei Tweets die wenige Meter voneinander abgesetzt wurden haben unter Umständen unterschiedliche Werte für den Längen- und Breitengrad.
			Dies kann für die Bestimmung der Häufigkeiten problematisch sein, da die Werte in der Regel nicht exakt übereinstimmen.
			Um dies zu umgehen sollen die geografischen Koodinaten auf Städte abgebildet werden.

		\subsection{Vorverarbeitung der geografischen Koordinaten}

			Die geografischen Koordinaten sollen auf Städte aufgelöst werden.
			Dies entspricht der untersten Ebene der geografischen Hierarchie.
			Bei der Auflösung auf eine Stadt werden durch die geografischen Hierarchieebenen implizit auch die Verwaltungseinheiten und das Land bestimmt.

			Jedem Tweet soll mit Hilfe von Voronoi-Regionen die am nächsten gelegene Stadt zugeordnet werden.
			Als Ergebnis liegt nun pro Referenzwert statt einer geografischen Koordinate eine Stadt vor.
			Dies kann als Übergang einer kontinuierlichen Darstellung durch geografische Koordinaten zu einer diskreten Darstellung durch Städte angesehen werden. 
			Wird ein Tweet innerhalb einer Voronoi-Region abgesetzt wird er der enstprechenden Stadt zugeordnet.

			Es bleibt zu definieren was unter einer Stadt zu verstehen ist.
			In dicht besiedelten Gebieten können viele kleine Städte vorhanden sein. 
			Damit wäre die Positionsangabe wiederum zu genau.
			Deshalb soll die Definition einer Stadt hier über die Einwohnerzahl stattfinden.
			Es wird festgelegt, dass die Einwohnerzahl über 15000 Einwohnern liegen muss um als Stadt zu zählen. 
			Der Tweet wird also der nächstgelegenen Stadt mit mehr als 15000 Einwohnern zugeordnet.
			In Ballungsräumen sind damit mehr Städte zu erwarten, womit die Genauigkeit zunimmt.
			Es ist allerdings auch zu erwarten, dass dort tendenziell mehr Tweets abgesetzt werden als in ländlichen Gebieten.
			Womit in jeder Voronoi-Region zu einer Stadt ausreichend Tweets vorhanden sind.
			Damit können potenziell mehr Tweets zu einer Stadt zugeordnet werden.
			Wohingegen in ländlichen Gebieten ein größeres Einzugsgebiet pro Stadt zustande kommt.
			Es sind allerdings auch weniger Tweets zu erwarten. 
			Durch das größere Einzugsgebiet werden dennoch ausreichend viele Tweets auf einer Stadt zugeordnet. 

			Die Distanzen, welche zwischen der tatsächlichen Position des Tweets und der zugeordneten Stadt liegen wurden protokolliert. 
			Dies spiegelt den Fehler der bei einer solchen Zuordnung entsteht wieder.
			In Tabelle \ref{tab:distances} sind die Ergebnisse dargestellt.

			\begin{table}[h]
			\centering
			\caption{Fehlerdistanzen zwischen Tweet Ursprung und zugeordneter Stadt (in km)}
			\label{tab:distances}
			\begin{tabular}{|l|l|}
			Durchschnitt & 7      \\ \hline
			Median       & 3.5    \\ \hline
			0.25 Quantil & 1.7    \\ \hline
			0.75 Quantil & 6.9    \\ \hline
			0.85 Quantil & 10     \\ \hline
			0.95 Quantil & 24.1   \\ \hline
			0.98 Quantil & 44.2   \\ \hline
			Größte Distanz      & 3424.5 \\ \hline
			Kleinste Distanz     & 0     
			\end{tabular}
			\end{table}

			Im Median liegt die Fehlerdistanz zwischen der tatsächlichen Position und der zugeordneten Stadt bei 3,5 Kilometern.
			Über die Quantile können die Fehlerdistanzen noch genauer untersucht werden.
			Das 0.25 Quantil sagt aus, dass 25\% aller Fehlerdistanzen unter 1,7 Kilometern liegen.
			95\% der fehlerdistanzen liegen unter 24,1 Kilometer. 
			Dies ist ausreichend genau. 

			Die größte gemessene Distanz sind 3424,5 Kilometer.
			Die geringste 0 Kilometer. 

			\todo{nearestNeighbourImage with Voronoi-Region and Zuordnung ländlich, ballungszentrum} 

		\subsection{Erweiterte Struktur der Georeferenz-Basis} \label{subsec:erweiterteStruktur} 

			Hier soll nun die erweiterte Struktur der Georeferenz-Basis vorgestellt werden.
			Mit der absoluten Häufigkeiten ist ein neuer Wert pro Datensatz hinzugekommen.
			Des weiteren wurde die Georeferenz auf eine Stadt aufgelöst und damit implizit die Verwaltungseinheit erster Ordnung (Adm1), die Verwaltungseinheit zweiter Ordnung (Adm2) und das Land bestimmt. 
			Zu einem Referenzwert sollen neben der Stadt zudem die anderen Ebenenen der geografischen Hierarchie abgelegt werden.
			Die daraus resultiernde Struktur der Georeferenz-Basis ist in \ref{tab:strukturMitHierarchie1} inklusive einiger Beispieleinträge dargestellt.


			\begin{table}[htpb]
				\caption{Struktur der Georeferenz-Basis mit geografischer Hierarchie} 
				\centering
				\tiny
				\begin{tabular}{|c|c|c|c|c|c|}
					\hline
					Referenzwert & Stadt & Adm2 & Adm1 & Land & abs. Häufigkeit \\
					\hline\hline
					 Los+Angeles    USA   & Los Angeles & LA County & CA & USA & 30 \\
					\hline
					 Los+Angeles    USA   & San Francisco & SF County & CA & USA & 3 \\
					\hline
					 Los+Angeles   & Los Angeles & LA County & CA & USA & 70 \\
					\hline
					 USA   & Los Angeles & LA County & CA & USA & 80 \\
					\hline
					 Heilbronn   & Heilbronn & Regierungsbezik Stuttgart & BaWü & BRD & 90\\
					\hline
				\end{tabular}
				\label{tab:strukturMitHierarchie1} 
			\end{table} 

		\subsection{Überblick}

			Hier soll nun ein Überblick über das gesamte Verfahren zum einlernen der Georeferenz-Basis gegeben werden.
		
			Zunächst werden die einzelnen Vorverarbeitungsschritte für den Nutzer-Standort und die Nutzer-Zeitzone durchgeführt.
			Parallel kann der Längen- und Breitengrad auf eine Stadt aufgelöst werden.
			Die dadurch entstandenen potenziellen geografischen Indikatoren und die zugehörige Georeferenz wird nun in die Georeferenz-Basis gespeichert. 
			Dabei wird überprüft ob dieser Datensatz bereits vorhanden ist. 
			Ist dies der Fall, wird der Häufigkeistwert des entsprechenden Datensatzes inkrementiert.
			Ist der Datensatz noch nicht vorhanden wird er angelegt und die absolute Häufigkeiten mit 1 initialisiert.

			Die Vorverarbeitung extrahiert dabei zusätzliche Informationen aus dem Nutzer-Standort.
			Durch die Bereiningung der Werte im Nutzer-Standort, die alphanumerische Sortierung, das identifzieren von Toponymen mit mehreren Worten und die darauffolgende Erzeugung von N-Grammen werden zusätzliche Informationen aus jedem Nutzer-Standort gewonnen.
			Die Nutzer-Zeitzone wird einbezogen um Doppeldeutigkeiten auflösen zu können.

			Durch die neue Datenstruktur, mit den absoluten Häufigkeiten und der abgebildeten geografischen Hierarchie, lassen sich nun tiefergehende Analysen durchführen um eine robuste Georeferenzierung zu ermöglichen. 
			Die absoluten Häufigkeiten geben dabei an wie oft ein Referenzwert in einer bestimmten Region vorkommt.

			Durch dieses Verfahren lässt sich eine Datenbasis erzeugen die domänenspezifische Eigenheiten, in Bezug auf die Verwendung spezieller Begriffe oder Formulierungen, berücksichtigt.
			Des weiteren werden Toponyme, die in Ortsverzeichnissen unter Umständen nicht hinterlegt sind, berücksichtigt.
			Auch geografische Indikatoren mit mittelbarem geografischen Bezug, zum Beispiel die Verwendung spezieller Begriffe in einer geografischen Region, können einbezogen werden. 

	\section{Geografischer Bezug der eingelernten Referenzwerte}
			
		Die eingelernten Referenzwerte beinhalten alle Werte aus den Nutzer-Standorten der Tweet-Sammlung.
		Es sind also auch Refrenzwerte vorhanden die keinen geografischen Bezug haben.
		Es ist die Frage zu beantworten: Wie kann bestimmt werden ob ein Referenzwert geografischen Bezug hat oder nicht?
		Oder: Wie kann vermieden werden, dass ein Referenzwert, der keinen geografischen Bezug hat, zur Georeferenzierung genutzt wird?
		
		Dies ist wichtig, denn durch die Referenzwerte wird in der eigentlichen Georeferenzierung einem geografischen Indikator eine Georeferenz zugewiesen. 
		Wird einem geografischen Indikator durch einen Referenzwert ohne geografischen Bezug eine Georeferenz zugewiesen ist diese mit hoher Wahrscheinlichkeit fehlerhaft.
		Denn der Referenzwert kann nicht mit einem geografischen Objekt in Bezug gebracht werden.
		Dies wiederum führt zu schlechten und unzuverlässigen Ergebnissen.
		Es muss also ein Verfahren gefunden werden um zu entscheiden ob die Referenzwerte einen geografischen Bezug haben oder nicht.

		Es ist zu beachten, dass die Vorverarbeitung keine Aussage zum geografischen Bezug macht, sondern vielmehr die Referenzwerte aus den Nutzer-Standorten extrahiert. 
		Dies soll sicherstellen, das möglichst viele Informationen aus den Nutzer-Standorten gezogen werden können und insbesondere keine Informationen verloren gehen.  
		
		Um zu entscheiden ob ein Referenzwert geografischen Bezug hat oder nicht wird die absolute Häufigkeit verwendet.
		Die absoluten Häufigkeiten geben an wie oft ein Referenzwert in einer bestimmten Region, zunächst in der Voronoi-Region der entsprechenden Stadt, vorkommt.			 
		Daraus kann nun ein geografischer Bezug abgeleitet werden.

		\subsection{Die absolute Häufigkeit als Hinweis auf geografischen Bezug zu Städten} 
			
			Eine hohe absolute Häufigkeit kann ein Hinweis auf geoografsichen Bezug eines Referenzwertes darstellen. 
			Aufgrund der Eigenschaften des Nutzer-Standorts ist anzunehmen, dass in der Voronoi-Region einer Stadt der Name der zugehörigen Stadt häufig vorkommt.
			Dadurch kann eine Relevanz des Referenzwertes abgeleitet werden. 
			Tritt der Referenzwert nicht häufig auf, so ist er von nur wenigen Nutzern als Nutzer-Standort in einer Stadt angegeben worden und somit für die Stadt nicht relevant.
			In Abbildung \ref{img:ULIstanbul} sind die Tweets in denen "'Istanbul"' im Nutzer-Standort vorkommt aufgetragen.
			Es ist deutlich eine Häufung um die Stadt Istanbul zu erkennen. 
			Werden die Tweets rund um Istanbul nun auf die Stadt Istanbul abgebildet, wird die Kombination aus dem Referenzwert "'Istanbul"' und der Georeferenz Istanbul sehr häufig vorkommen und dementsprechend eine hohe absolute Häufigkeit aufweisen.
			In den Nutzer-Standorten der Tweets rund um Istanbul taucht "'Istanbul"' tatsächlich 972 mal auf.
			Damit kann eine Gewisse Relevanz für den Referenzwert "'Istanbul"' abgeleitet werden.
			Es kann also ein Schwellwert für die Häufigkeit eingeführt werden um Referenzwerte mit geografischem Bezug zu identifizieren.

			Allerdings garantiert die absolute Häufigkeit noch nicht, dass ein Referenzwert einen geografischen Bezug hat. 
			Es können auch Werte an einem bestimmten Ort häufig vorkommen, die keinen geografischen Bezug haben.
			Um dies erkennen zu können muss ein weiterer Wert berechnet werden.

		\subsection{Relative Häufigkeiten als Hinweis auf geografischen Bezug zu Städten}

			Betrachtet man die absoluten Häufigkeiten isoliert voneinander wird die Verteilung des Referenzwertes außer acht gelassen. 
			Ein Referenzwert kann eine gleichmäßige Verteilung über mehrere Städte aufweisen.
			Das bedeutet, er wird in vielen unterschiedlichen Städten benutzt. 
			Es ist aber trotzdem nicht ausgeschlossen, dass in bestimmten Städten Häufungen auftreten, die über einem gewählten Schwellwert für die absolute Häufigkeit liegen.
			Betrachtet man jedoch die realtive Häufigkeit kann diese Häufung sehr gering sein.
			Dies ein Hinweis darauf sein, dass der Referenzwert keinen geografischen Bezug hat.
			Die relative Häufung sagt dann aus, dass ein Referenzwert sehr verteilt auftritt. 
			Es ist also wichtig nicht nur die absoluten Häufigkeiten, sondern auch die relativen Häufigkeiten der Referenzwerte zu berücksichtigen.

			\subsubsection{Berechnung der relativen Häufigkeiten}  

				Um die relativen Häufigkeiten zu berechnen soll das Vorkommen eines Referenzwertes in einer Stadt, durch die Gesamtanzahl der Vorkommen des Referenzwertes geteilt werden.
				Damit erhält man den prozentualen Anteil der auf eine Stadt entfallenden Vorkommen eines Referenzwertes.
				Dies kann mit Hilfe der absoluten Häufigkeiten umgesetzt werden.

				Sei $(r_i,c_j)$ ein Datensatz der Georeferenz-Basis mit Referenzwert $r_i$ und Georeferenz $c_i$.
				Des weiteren liefert $H(r_{i},c_{j})$ die absolute Häufigkeit zu einem Referenzwert $r_i$ und einer Georefrenz $c_i$. 

				Damit kann die relative Häufigkeit $rel_{(r_i,c_j)}$ für jede Kombination $(r_i,c_j)$ durch die folgende Formel berechnet werden. 
				$n_c$ ist dabei die Anzahl aller Georeferenzen.

				\begin{equation}
					d_{r_i,c_j}=\frac{H(r_i,c_j)}{\sum^{n_c}_{j=0}{H(r_i,c_j)}}
				\end{equation}	

			\subsubsection{Beispiel} 

				"'La+Plata"' tritt rund um die Stadt La Plata in Argentien 91 mal auf.
				Der Referenzwert "'La+Plata"' hat offensichtlich einen geografischen Bezug zu einer Stadt, denn er ist ein Stadt-Name und stellt deshalb ein Toponym dar. 

				Obwohl "'the"' keinen offensichtlichen geografischen Bezug ist die absolute Häufigkeit von 91 Vorkommen in Jakarta hoch.
				Der Schwellwert könnte nun aufgrund der Erfahrung mit dem Referenzwert "'La+Plata"' auf 90 angesetzt werden.
				Dann würde davon ausgegangen werden, dass der Referenzwert "'the"' einen geografischen Bezug hat.
				Betrachtet man allerdings die Abbildung \ref{img:ULThe} fällt auf, dass Tweets mit dem Wert "'the"' im Nutzer-Standort sehr verteilt auf dem Globus auftreten.
				Im Gegensatz dazu tritt "'La+Plata"' in den Nutzer-Standorten sehr konzentriert auf.
				In Abbildung \ref{img:ULlaPlata} wird die Verteilung von Tweets deren Verfasser "'La+Plata"' im Nutzer-Standort enthalten dargestellt. 
				Es ist deutlich eine Häufung um die Stadt La Plata in Argentien zu erkennen, weltweit tritt der Referenzwert aber sehr selten auf.
				
				Berechnet man nun die relativen Häufigkeiten kann dies abgebildet werden.
				In Tabelle \ref{tab:the} sind die zugeordneten Städte, die absoluten Häufigkeiten und die berechneten relativen Häufigkeiten für die Vorkommen des Wortes "'the"' aufgetragen. 
				Die Einträge sind absteigend nach dem Wert der relativen Häufigkeit sortiert und auf 4 Einträge gekürzt.
				Insgesamt kam das Wort "'the"' in 2824 verschiedenen Städten vor.
				Dabei wurde es insgesamt 5764 mal verwendet. 
				Trotz der hohen absoluten Häufigkeit in Jakarta liegt die relative Häufigkeit bei lediglich 1,6\%.
				Aus den relativen Häufigkeiten lässt sich nun die, in Abbildung \ref{img:ULThe} vermutete, globale Verteilung ablesen.


				\begin{table}[h]
				\centering
				\caption{"'the"'}
				\label{tab:the}
				\begin{tabular}{|l|l|l|}
				\hline
				Stadt             & abs. Häufigkeit & rel. Häufigkeit in \% \\ \hline \hline
				Jakarta           & 91              & 1,6                       \\ \hline
				Singapore         & 27              & 0,5                       \\ \hline
				Bekasi            & 25              & 0,4                       \\ \hline
				Philadelphia      & 23              & 0,4                       \\ \hline
				\end{tabular}
				\end{table}

				Die Verteilung erklärt sich dadurch, dass das Wort "'the"' im englischen sehr häufig auftritt.
				Englisch ist die internationale Verkehrssprache und wird dementsprechend global und sehr häufig verwendet.
				Dies spiegelt sich in der Verteilung der vorkommen auf dem Globus wieder.
				Die Häufung um Jakarta kann teilweise damit erklärt werden, dass sehr viele Tweets die in und um Jakarta abgesetzt werden eine Angabe von Längen- und Breitengrad aufweisen. 

				In Tabelle \ref{tab:laPlata} wird dieselbe Auswertung für "'La+Plata"' dargestellt. 
				"'La+Plata"' ist insgesamt 129 mal in 23 verschiedenen Städten aufgetaucht. 
				In der Stadt La Plata, in Argentien, kam es 91 mal vor.
				Dies entspricht einer relativen Häufigkeit von 70,5\%.

				\begin{table}[h]
				\centering
				\caption{"'La Plata"'}
				\label{tab:laPlata}
				\begin{tabular}{|l|l|l|}
				\hline
				Stadt            & abs. Häufigkeit & rel. Häufigkeit in \% \\ \hline \hline
				La Plata         & 91              & 70,5                      \\ \hline
				Villa Gesell     & 9               & 7,0                       \\ \hline
				Mar del Plata    & 5               & 3,9                       \\ \hline
				Quilmes          & 3               & 2,3                       \\ \hline
				\end{tabular}
				\end{table}

				"'La+Plata"' taucht Erwartungsgemäß am häufigsten rund um die Stadt La Plata auf, da es der Name dieser Stadt ist.  

				Es lässt sich also anhand der relativen Häufigkeiten ein geografischer Bezug des Referenzwertes nachweisen.
				Damit kann man zunächst bestimmen ob ein Referenzwert geografischen Bezug hat oder nicht.
				Die relativen Häufigkeiten können nach dem einlernen der Referenzwerte berechnet und in der Georeferenz-Basis hinterlegt werden.
				Mit Hilfe eines Schwellwertes für die relativen Häufigkeiten, kann nun bestimmt werden wann ein Referenzwert geografischen Bezug hat.

				Aber auch die ausschließliche Betrachtung der relativen Häufigkeiten reicht nicht aus um die geografische Relevanz nachzuweisen.
				Da die relativen Häufigkeiten basierend auf den Vorkommen des Refrenzwertes berechnet werden sagen diese nichts über die Häufigkeit aus. 
				Kommt ein Refrenzwert zwei mal in zwei verschiedenen Städten vor, liegen die jeweiligen relativen Häufigkeiten bei 50\%.
				Dies ist ein sehr hoher Wert, doch da der Referenzwert nur einmal vorkam ist es sehr unwahrscheinlich, das er einen geografischen Bezug hat.   

		\subsection{Geografischer Bezug der Referenzwerte zu Verwaltungseinheiten und Ländern} 

			Beim einlernen der Georeferenz-Basis werden durch die absolute Häufigkeit die Vorkommen pro Stadt gespeichert.
			Mit den daraus errechneten relativen Häufigkeiten kann nicht entschieden werden, ob für den Referenzwert eine globale Verteilung vorliegt oder ob der Referenzwert unter Umständen nur regional begrenzt, zum Beispiel in einem Land, auftritt.
			Für Referenzwerte die ein Land oder eine Verwaltungseinheit bezeichnen ist auf Städteebene also eine geringe relative Häufigkeit zu erwarten.
			Diese Referenzwerte treten in einer größeren geografischen Region auf und sind somit über mehrere Städte verteilt.
			Es ist zu erwarten, dass ein Ländername in den Nutzer-Standorten von Tweets aus dem gesamten Land auftritt.
			Durch die Unterteilung des Landes in Stadtgebiete wird der Wert sehr verteilt auf die Städte des Landes auftreten.

			Soll nun statt einer Stadt eine Verwaltungseinheit oder das Land als Georeferenz bestimmt werden, kann mit diesen absoluten Häufigkeiten keine Aussage über den geografischen Bezug gemacht werden. 
			
			Am folgenden Beispiel soll dieser Sachverhalt erläutert werden.

			In Abbildung \ref{img:ULIstanbulWales} sind in grün Tweets dargestellt, welche im Nutzer-Standort "'Wales"' enthalten.
			Wales entspricht einer Verwaltungseinheit erster Ordnung und gehört zu Grossbritannien.
			Die Tweets sind in der gesamten geografischen Region, über die sich Wales erstreckt, verteilt.
			Außerhalb von Wales tritt "'Wales"' im Nutzer-Standort sehr selten auf.
			Die relativen Häufigkeiten in Tabelle \ref{tab:walesCity} bestätigen eine Verteilung über eine größere geografische Region.
			Anhand der relativen Häufigkeiten kann aber nicht entschieden werden ob der Referenzwert global verteilt ist, oder in einer bestimmten geografischen Region, wie einem Land, auftritt. 
			"'Wales"' taucht in insgesamt 78 Städten 346 mal in Nutzer-Standorten auf.

			\begin{table}[h]
			\centering
			\caption{"'Wales"'}
			\label{tab:walesCity}
			\begin{tabular}{|l|l|l|}
			\hline
			Stadt      & abs. Häufigkeit & rel. Häufigkeit in \% \\ \hline \hline
			Cardiff    & 44 			 & 12,7 \\ \hline
			Newport    & 32 			 & 9,2  \\ \hline
			Carmarthen & 24 			 & 6,9  \\ \hline
			Swansea    & 18 			 & 5,2  \\ \hline
			...    & ... & ...  \\ \hline
			\end{tabular}
			\end{table}

			Die relative Häufigkeit von 12,7\% weisst eher darauf hin, dass "'Wales"' keinen geografischen Bezug aufweist.
			Auf Städteebene ist dies auch durchaus korrekt. 
			Allerdings kann aus diesen Ergebnissen kein geografsicher Bezug zu einer der anderen geografischen Hierarchieebenen abgeleitet werden.
			Das Problem ist, dass Wales keinen geografischen Bezug zu einer Stadt aufweist, wohl aber zu einer Verwaltungseinheit erster Ordnung und daher zu einer geografischen Region. 

			Um dieses Problem lösen zu können müssen zu einem Referenzwert die relativen Häufigkeiten für die anderen geografischen Hierarchieebenen berechnet werden.
			Damit kann dann die Verteilung der Referenzwerte auf diese Hierarchieebebenen betrachtet werden.
			
		\subsubsection{Berechnung der relativen Häufigkeiten zu Verwaltungseinheiten und Ländern} 

			Da zu jedem Referenzwert die zugehörigen Verwaltungseinheiten und Länder bekannt sind können die absoluten und relativen Häufigkeiten direkt aus der Georeferenz-Basis berechnet werden.

			Es müssen lediglich die absoluten und relativen Häufigkeiten aufsummiert werden, bei denen der Wert der geografischen Hierarcheieebenen übereinstimmen.
			Im Beispiel aus Tabelle \ref{tab:walesCity} müssen alle absoluten und relativen Häufigkeiten derjenigen Städte aufsummiert werden, die in derselben Verwaltungseinheit erster Ordnung liegen.
			In \ref{img:bspVerwaltungBerechnungHaufigk} ist dies an einigen Einträgen für den Referenzwert "'Wales"' exemplarisch dargestellt.
			Betrachtet man die Verwaltungseinheiten zu allen Städten in denen "'Wales"' im Nutzer Standort vorkommt ergibt sich folgende Liste.

			\begin{enumerate}
				\item Wales 35
				\item England 30
				\item unterschiedliche Verwaltungseinheiten 13
			\end{enumerate}

			Aus dieser Betrachtung alleine lässt sich noch nicht entscheiden ob der Referenzwert "'Wales"' einen geografsichen Bezug zu einer Verwaltungseinheit hat.
			Denn der Referenzwert kam sowohl in 30 Städten in England als auch in 30 Städten in Wales vor, was keinen signifikanten Unterschied darstellt. 
			Summiert man allerdings die Vorkommen und relativen Häufigkeiten pro Stadt auf ergibt sich daraus Tabelle \ref{tab:WalesVerw1}.

			\begin{table}[h]
			\centering
			\caption{"'Wales"'}
			\label{tab:WalesVerw1}
			\begin{tabular}{|l|l|l|}
			\hline
			Adm1 & abs. Häufigkeit & rel. Häufigkeit in \% \\ \hline \hline
			Wales                   & 298 & 86,1 \\ \hline
			England                 & 38  & 11,0 \\ \hline
			National Capital Region & 1   & 0,3  \\ \hline
			Stockholm               & 1   & 0,3  \\ \hline
			... & ... & ... \\ \hline
			\end{tabular}
			\end{table}  

			Die relative Häufigkeit von 86,1\% weißt nun deutlich darauf hin, dass der Referenzwert einen geografischen Bezug zu Wales hat.
			Mit diesem Vorgehen, kann der geografische Bezug eines Referenzwertes auf jeder der geografischen Hierarchieebenen untersucht werden.

			Analog können die Werte für die Verwaltungseinheit zweiter Ordnung und dem Land berechnet werden.
			Dieses Vorgehen ermöglicht es einen geografischen Bezug eines Referenzwertes auf jeder der geografischen Hierarchieebenen zu prüfen.

		\subsubsection{Fazit}

			Mit der absoluten Häufigkeit besteht ein erster Hinweis darauf ob ein Referenzwert geografischen Bezug hat oder nicht.
			Die alleinige Betrachtung der absoluten Häufigkeit lässt aber die Verteilung der Werte auf den jeweiligen geografischen Hierarchieebebenen außer betracht.
			Mit den berechneten relativen Häufigkeiten können die Referenzwerte zusätzlich auf ihre Verteilung untersucht werden.
			Die relativen Häufigkeiten können nach dem Einlernen berechnet und in der Georeferenz-Basis gespeichert werden. 
			Während der Georeferenzierung können diese Werte dann genutzt werden um die geografischen Indikatoren zu bestimmen. 

	\section{Verfahren zur Geolokalisierung am Beispiel von Twitter}

		Im vorhergehenden Abschnitt wurde ein Verfahren zum einlernen der Georeferenz-Basis vorgestellt. 
		Hier soll nun das Verfahren zur Georeferenzierung eines Twitter-Nutzers vorgestellt werden.
		Dabei dient die Georeferenz-Basis und die in ihr abgelegten Werte als Basis für die Zuweisung einer Georeferenz.

		Zunächst werden aus dem Nutzer-Standort und der Nutzer-Zeitzone potenzielle geografische Indikatoren erzeugt.
		Dies geschieht analog zur Erzeugung von Referenzwerten beim einlernen der Georeferenz-Basis.
		Es werden also dieselben Vorverarbeitungsschritte für den Nutzer-Standort und die Nutzer-Zeitzone durchgeführt.
		Daraus resultiert eine Menge potenzieller geografischer Indikatoren.
		Die Werte der potenziellen geografischen Indikatoren werden nun in der Georeferenz-Basis nachgeschlagen. 
		Dabei werden alle Datensätze deren Referenzwerte mit den potenziellen geografischen Indikatoren korrepsondieren zurückgegeben.
		Auf diesen Datensätzen erfolgt die weitere Verarbeitung und Bestimmung der wahrscheinlichsten Georeferenz.
		
		Es liegt nun eine Menge an Datensätzen aus der Georeferenz-Basis vor.
		Die Referenzwerte entsprechen dabei den potenziellen geografischen Indikatoren.
		Die absoluten und relativen Häufigkeiten werden für jeden Referenzwert separat analysiert.
		Das Ziel der Analyse ist es, die wahrscheinlichste Georeferenz zu ermitteln.

		In Abbildung \ref{img:AblaufGeoref} ist der gesamte Ablauf an einem Beispiel dargestellt.
		In den folgenden Abschnitten soll nun die Analyse genauer betrachtet werden.

		\subsection{Analyse}

			Dies Analyse beihaltet zwei Schritte. 
			Zuerst müssen dijenigen Refrenzwerte gewählt werden, welche am wahrscheinlichsten einen geografischen Bezug haben.
			Dabei wird jeder Refrenzwert separat betrachtet. 
			In einem nächsten Schritt wird der Refrenzwert gewählt der unter den verbliebenen am wahrscheinlichsten die geografische Position des Nutzers beschreibt. 

			\subsubsection{Auswahl der Referenzwerte mit geografischem Bezug}

				Es können pro Referenzwert zunächst mehrere Datensätze vorliegen.
				Aus diesen sollen diejenigen gewählt werden, welche am wahrscheinlichsten einen geografischen Bezug aufweisen.
				Dazu werden sowohl die absoluten als auch die relativen Häufigkeiten genutzt. 
				Für jeden Referenzwert wird derjenige Datensatz gewählt, die größte relative Häufigkeit $h_{rel}$ über einem Schwellwert $s_{rel}$ aufweist.
				Mit diesem Schwellwert lässt sich bestimmen wie verteilt der Referenzwert auftreten kann.
				Zusätzlich wird geprüft ob die absolute Häufgikeit ebenfalls über einem Schwellwert $s_{abs}$ liegt.
				Mit diesem Schwellwert lässt sich bestimmen wie häufig der Referenzwert an einer geografischen Position oder in einer geografsichen Region auftreten muss. 

			\subsubsection{Bestimmung der wahrscheinlichsten Georeferenz} 

				Nun liegt wiederum eine Menge an Datensätzen vor.
				Jeder Referenzwert, und damit auch jeder potenzielle geografische Indikator, taucht nur noch ein mal auf. 

				Aus den verbliebenen Datensätzen soll nun die Georeferenz gewählt werden. 
				Dazu werden die relativen Häufigkeiten verglichen.
				Es wird der Datensatz mit der höchsten relativen Häufigkeit gewählt.
				Die Georeferenz dieses Datensatzes wird dann dem Twitter-Nutzer zugewiesen. 
				Damit wird der Referenzwert ausgewählt der die größte relative Häufigkeit aller untersuchten Referenzwerte aufweist. 

				Die Referenzwerte stellen NGramme dar, wie in der Vorverarbeitung in Unterkapitel \ref{subsec:VorverarbeitungStandortZeitzone} erläutert wird.
				Es werden hier also insbesondere auch Uni-, Bi- und Trigramme miteinander verglichen.
				Darauf soll nun eingegangen werden.

				\paragraph{Vergleich der relativen Häufigkeiten zu Uni- Bi- und Trigrammen}

					Jedes Element eines Bi- oder Trigrammes kann potenziell einen geografischen Bezug haben. 
					Umso mehr Elemente ein NGramm beinhaltet umso spezieller kann die Beschreibung des geografischen Objekts sein.
					Deshalb können NGramme mit einem höheren Grad ein Objekt genauer beschreiben als NGramme mit einem niedrigeren Grad.

					Allerdings können NGramme mit einem höheren Grad auch eine schlechtere Beschreibung darstellen. 
					Beispielsweise wenn das zusätzliche Element keinen geografsichen Bezug hat.

					Bei NGrammen mit einem Grad größer zwei können also zwei Fälle unterschieden werden.

					\begin{enumerate}
						\item Die Kombination aus den Elementen des NGrammes beschreibt einen Ort genauer
						\item Die Kombination aus den Elementen des NGrammes beschreibt einen Ort nicht genauer
					\end{enumerate}

					\subparagraph{Fall1} 

						Ein Beispiel für den ersten Fall ist der Nutzer-Standort "'york"' mit der Nutzer-Zeitzone "'eastern+time+us+canada"'. 
						Durch die Vorverarbeitung werden folgende potenzielle geografische Indikatoren erzeugt.
						\begin{enumerate}		
							\item york
							\item york \textit{eastern+time+us+canada}
						\end{enumerate}		

						Eine Stadt Namens York existiert sowohl in Grossbritannien als auch in den USA.
						Fragt man nun die beiden Referenzwerte in der Georeferenz-Basis ab erhält man folgende Werte:

							\begin{table}[h]
								\centering
									\caption{"'the"'}
									\label{tab:the}
									\begin{tabular}{|l|l|l|l|}
									\hline
									Referenzwert 				& Stadt  	& abs. Häufigkeit & rel. Häufigkeit in \% \\ \hline \hline
									York          				& York (GB) & 97              & 48,3       \\ \hline
									york eastern+time+us+canada & York (US) & 12              & 63,2        \\ \hline
									\end{tabular}
							\end{table}

							Die realtive Häufigkeit für york in Kombination mit der Zeitzone ist höher. 
							Die Zeitzone gibt zusätzliche Auskunft darüber welches York gemeint ist. 
							Die Kombination ist spezieller, kommt deshalb seltener vor und potenziell eher dort wo sie zutrifft. 
							In diesem Fall in York in den USA. 

							In den meisten Fällen beschreibt einer der beiden Indikatoren eine größere geografische Region wie beispielsweise einen Bundesstaat der USA.
							Wird ein weiterer Wert, beispielsweise ein Städtename hinzugenommen, wird die Angabe des Ortes genauer. 
							Die Wahrscheinlichkeit, dass diese Kombination ausserhalb des Ortes auftritt wird geringer. 

					\subparagraph{Fall 2}

						Hier können wiederum 2 Fälle unterschieden werden.

						\begin{enumerate}
							\item Beide Elemente beziehen sich auf unterschiedliche geografische Objekte
							\item Nur ein Element hat geografischen Bezug das andere nicht 
						\end{enumerate}

						Wenn zu einem Referenzwert mit geografischem Bezug ein Element hinzugefügt wird, welches keinen geografischen Bezug hat, beschreibt dies den Ort nicht genauer.
						Es ist zu erwarten, dass die Kombination der Elemente sehr selten vorkommt oder sehr verteilt ist. 
						Ist die Kombination verteilter, so ist der relative Wert geringer als der des einzelnen Referenzwertes mit geografischem Bezug.
						Ist die Kombination seltener ist der Referenzwert bereits durch den Schwellwert $s_{abs}$ aussortiert.		

						Wenn zu einem Referenzwert mit geografischem Bezug ein Element hinzugefügt wird, welches zwar geografischen Bezug hat, aber dieses sich auf ein anderes geografisches Objekt bezieht ist dasselbe Verhalten zu erwarten.
						
			\subsubsection{Wahl der Schwellwerte}

				Die Wahl der beiden Schwellwerte ist abhängig von den Anforderungen.
				Dabei ist die gewünschte geografische Hierarchie der zurückgegeben Georeferenz ein Faktor.
				Und die gewünschte Genauigkeit und Trefferquote.
				
				\paragraph{Gewünschte Hierarchieebene der Georeferenz}

					Umso größer die betrachtete geografische Region ist, umso weniger Möglichkeiten zur Einteilung gibt es.
					Auf Städteebene gibt es 23322 verschiedene geografische Regionen. 
					Für jede Stadt mit mehr als 15000 Einwohnern existiert dabei eine Region.
					Diese Städte verteilen sich auf 234 verschiedene Länder.
					Dieselbe Menge an Referenzwerten, verteilt sich auf Ländereebene also auf weniger geografische Regionen. 
					Dadurch werden die Werte der relativen Häufigkeit und der absoluten Häufigkeit insgesamt größer.
					Relativ zueinander werden allerings nach wie vor Refrenzwerte mit geografischem Bezug größer sein als Refrenzwerte ohne geografischen Bezug.

					Es müssen also für jeder geografsiche Hierarchieebene geeignete Schwellwerte $s_{rel}$ und $s_{abs}$ gefunden werden.

				\paragraph{Genauigkeit und Trefferquote} 

					Der zweite Faktor ist die gewünschte Trefferquote und die Genauigkeit.

					Umso niedriger der Schwellwert $s_{rel}$ ist, umso größer wird die Wahrscheinlichkeit Referenzwerte zu wählen die keinen geografischen Bezug haben.
					Daraus resultieren mehr fehlerhafte Zuordnungen einer Georeferenz.
					Wodurch die Genauigkeit schlechter wird.
					Dadurch können allerdings mehr Georeferenzen zugeordnet werden, wordurch die Trefferquote verbessert wird.
					Umso höher der Schwellwert $s_{rel}$ gewählt wird umso mehr Referenzwerte mit geografischem Bezug werden verworfen.
					Die Wahrscheinlichkeit, dass die gewählten Referenzwerte tatsächlich geografischen Bezug haben ist allerdings höher.
					Dadurch können weniger Georeferenzen zugeordnet werden.
					Somit sinkt die Trefferquote.
					Allerdings sind die zugewiesenen Georeferenzen sicherer womit die Genauigkeit steigt.

					Der Schwellwert $s_{abs}$ vermeidet, dass Refrenzwerte gewählt werden die eine hohe realtive Häufigkeit aufweisen aber aufgrund ihrer geringen Vorkommen nicht relevant sind.
					Die Auswirkungen der Wahl des Schwellwertes $s_{abs}$ verhalten sich Analog zum Schwellwert $s_{rel}$.

				\paragraph{Fazit}

					Die Wahl der Schwellwerte hängt zum einen von der Hierarchieebene und zum anderen von den Anforderungen an die Genauigkeit und die Trefferquote ab.
					In Bezug auf die geografischen Hierarchieebenen sind lediglich separate Schwellwerte für jede geografischen Hierarchieebenen zu bestimmen, da die relativen und absoluten Häufigkeiten sich insgesamt verändern.
					Bezüglich der Genauigkeit und der Trefferquote ist ein Kompromiss zwischen den beiden Werten einzugehen. 
					Die Verbesserung der Trefferquote geht mit einer Verschlechterung der Genauigkeit einher und umgekehrt.
					Es kann also entweder ein Kompromiss gefunden werden der ein Optimum für beide Werte darstellt. 
					Oder einer der Werte wird optimiert. 
			
		



	