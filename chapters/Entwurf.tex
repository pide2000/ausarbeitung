%!TEX root = ../document.tex
\chapter{Lösungsansatz} \label{chp:Loesungsansatz}
In diesem Kapitel wird ein Verfahren zur Lokalisierung von Twitter-Nutzern vorgestellt.
Die Fragestellungen aus Kapitel \ref{sec:fragestellung} werden, unter Berücksichtigung der Anforderungen aus Kapitel \ref{sec:Anforderungen}, beantwortet.  

Zunächst soll ein Überblick über die Funktion und den Ablauf des Verfahrens gegeben werden ohne detailliert auf die einzelnen Verfahrensschritte einzugehen.
Danach wird das Verfahen von Grundauf betrachtet und die einzelnen Verfahrensschritte eingehender erläutert. 

	\section{Überblick} \label{sec:ueberblick} 

	Das erarbeitete Verfahren soll es ermöglichen Twitter-Nutzern, deren geografische Position unbekannt ist, eine Georeferenz zuzuordnen.
	Dabei sollen als Eingabe für die Georeferenzierung lediglich die Nutzer-Zeitzone und der Nutzer-Standort aus dem Profil eines Twitter-Nutzers verwendet werden.
	Als Ergebnis soll eine Georeferenz mit einem Konfidenzwert zurückgeliefert werden. 
	Dabei hat der Anwender die Möglichkeit, sowohl die Genauigkeit bezüglich der geografischen Position, als auch einen Schwellwert für die gewünschte Konfidenz der Georeferenz anzugeben.
	In Abbildung \ref{A1} ist der generelle Ablauf der Georeferenzierung dargestellt. 
	\todo{Schema Darstellung Eingabe->Ausgabe  Sketchbook A1: Unterschrift Die Eingabe besteht aus dem Nutzer-Standort sowie der Nutzer-Zeitzone. 
	Als Rahmenbedingungen wird die gewünschte Hierarchie-Ebene sowie der Schwellwert für die Konfidenz angeben. 
	Als Ausgabe erhält man eine Georeferenz und einen Konfidenzwert, der angibt wie sicher das Ergebnis ist.} 
	\label{A1} 

	Die Georeferenzierung nach dem Schema aus Abbildung \ref{A1} setzt voraus, dass aus den eingegebenen Indikatoren eine Georeferenz abgeleitet werden kann.
	Da es sich beim Nutzer-Standort und der Nutzer-Zeitzone um unmittelbare geografische Indikatoren handelt, lässt sich ein geografischer Bezug aus diesen Indikatoren ableiten.      
	Die Idee besteht nun darin aus einer umfangreichen Tweet-Datensammlung die Zuordnung der eingegebenen Indikatoren zu geografischen Positionen zu lernen und diese in einer Datenbasis zu speichern.
	Diese Datenbasis soll im folgenden als Georeferenz-Basis bezeichnet werden.
	Damit dies realsiert werden kann, muss die Tweet-Datensammlung pro Datensatz den Nutzer-Standort, die Nutzer-Zeitzone und eine Georeferenz in Form von Längen- und Breitengrad beinhalten.  \footnote{Siehe Kapitel \ref{chp:Einleitung} genutzte Daten}
	
	Der Wert des Nutzer-Standortes ist nicht objektiv, nicht zuverlässig und nicht gesichert, was zu Problemen bei der Auswertung führen kann.
	Dies macht eine Analyse und eine entsprechende Vorverarbeitung dieses Indikators nötig.
	Zur Erstellung der Georeferenz-Basis werden deshalb zunächst einige Schritte zur Vorverarbeitung der Indikatoren durchgeführt.
	Daraus können mehrere neue Indikator-Werte resultieren.
	Zusätzlich wird, die in jedem Tweet anegegebene Georeferenz, verarbeitet.
	Dabei wird jeder Georeferenz ein geografisches Objekt zugeordnet.
	In der Georeferenz-Basis werden nun die so erstellen Indikator-Werte mit den entsprechenden geografischen Objekten gespeichert.
	Dadurch entsteht ein Wörterbuch mit Indikatoren und zugehörigen geografischen Objekten, die Georeferenz-Basis.
	Der gesamte Ablauf zur Erstellung der Georeferenz-Basis wird in Abbildung \ref{A2} dargestellt.

	Bei der Georeferenzierung werden die Indikatoren zunächst derselben Vorverarbeitung wie beim einlernen unterzogen.
	Die Vorverarbeitungsschritte sind somit generisch, da sie sowohl vor dem erzeugen der Georeferenz-Basis als auch vor der eigentlichen Georeferenzierung durchgeführt werden.
	Auch hierbei können aus einem Indikator meherere neue Indikator-Werte entstehen.
	Nach der Vorverarbeitung werden alle so erzeugten neuen Werte in der Georeferenz-Basis nachgeschlagen.
	Der Ablauf der Georeferenzierung wird in Abbildung \ref{A3} dargestellt. 

	\todo{Ablaufplan A1, A2, A3} 

	In den folgenden Kapiteln soll nun genauer auf die einzelnen Teile des Verfahrens eingegangen werden. 
	Das Verfahren wird dabei in zwei Teilen behandelt.

	\paragraph{Einlernen der Georeferenz-Basis}  
	In diesem Teil wird erklärt wie mit Hilfe einer Tweet-Sammlung die Georeferenz-Basis durch ein Lern-Verfahren erstellt wird.
	Im Zuge des Einlernens der Georeferenz-Basis werden auch die generischen Vorverarbeitungsschritte erläutert die einen wesentlichen Teil zum einlernen der Georeferenz-Basis beitragen.
	Die Art und Weise der Vorverarbeitung hängt mit der verwendeten geografischen Hierarchie und der späteren Auswertung der vorverarbeiteten Daten zusammen.
	Deshalb werden die Vorverarbeitungsschritte einzeln und in Bezug auf die verwendete geografische Hierarchie und das Auswertungs-Verfahren zur Erstellung der Georeferenz-Basis betrachtet.
	Danach soll der gesamte Ablauf des Einlernens noch einmal dargestellt und kurz erklärt werden um einen Gesamtüberblick zu liefern.
	
	\paragraph{Georeferenzierung} 
	Die Vorverarbeitungsschritte der Indikatoren wird in diesem Teil nur angeschnitten, da diese bereits im ersten Teil genau erläutert werden. 
	Es wird in diesem Teil eingehend betrachtet wie die Ergebnisse der Suchanfrage an die Georeferenz-Basis ausgewertet werden. 
	Dabei wird insbesondere die Berechnung der Konfidenzen genauer erläutert.
	Zuletzt wird noch die Einbeziehung der geografischen Hierarchie betrachtet. 
	Am Ende dieses Teils steht dann das Ergebnis der Georeferenzierung. 


	\section{Einlernen der Georeferenz-Basis}
	Zunächst soll der Nutzer-Standort und die Nutzer-Zeitzone als geografischer Indikator genauer betrachtet werden. 
	Dabei werden Probleme identfiziert die durch die spezifischen Eigenschaften des Nutzer-Standortes entstehen.
	Es wird herausgearbeitet warum ein naiver Ansatz, beispielsweise mit einer Abfrage an ein Ortsverzeichnis, das Problem der Georeferenzierung hier nicht befriedigend lösen kann.  
	Danach werden die Struktur der Georeferenz-Basis und die einzelnen Vorverarbeitungsschritte erläutert mit Hilfe derer die Probleme gelöst werden können. \todo{überarbeiten} 
			\subsection{Der Nutzer-Standort als geografischer Indikator} \label{subsec:ulAsgeogInd} 

			Zunächst soll der Nutzer-Standort als geografischer Indikator eingehender betrachtet werden. 
			In Abschnitt \ref{chp:Grundlagen} wurde der Nutzer-Standort bezüglich seiner Eigenschaften untersucht. 
			Demnach kann der Nutzer-Standort als unmittelbarer geografischer Indikator angesehen werden, da als Eingabe eine geografische Position gefordert wird.  
			In zahlreichen anderen Arbeiten wurde deshalb versucht den Nutzer-Standort \todo{Referenzen auf frühere Ansätze mit Gazetteer Abfrage} durch eine Anfrage an ein Ortsverzeichis auf eine konkrete geografische Position aufzulösen.

			Dieser naive Ansatz ignoriert allerdings die Eigenschaften des Wertes der im Nutzer-Standort gespeichert ist und die folgenden Probleme verursacht.

			Nach Abschnitt \ref{chp:Grundlagen} ist der Wert des Nutzer-Standortes nicht objektiv, nicht zuverlässig und nicht gesichert. 
			Im folgenden werden die einzelnen Eigenschaften in Bezug zum Nutzer-Standort betrachtet und die enstehenden Probleme benannt.
			
			\paragraph{Nicht zuverlässig} 
				
				Diese Eigenschaft sagt aus, dass der eingegebene Wert nicht zwingend ein Toponym darstellt.
				Vom Nutzer kann jeder beliebige Wert eingegeben werden, unabhängig davon ob dieser ein Toponym ist oder nicht.
				Beim naiven Ansatz, der Abfrage an ein Ortsverzeichnis wird allerdings implizit angenommen das es sich beim eingegebenen Wert um ein Toponym handelt.
				Dadurch kann es zu Fehlern bei der Auflösung kommen.
				Dadurch das der Wert nicht zuverlässig ist wird die Eigenschaft, dass der Nutzer-Standort ein unmittelbarer geografischer Indikator ist, in gewisser Weise relativiert.
				Denn theoretisch könnte jeder Nutzer einen Wert eingeben, der kein Toponym darstellt, womit die Eigenschaft des unmittelbaren geografischen Indikators hinfällig wäre.
				Es muss allerdings beachtet werden, dass der Nutzer-Standort von einem Großteil der Nutzer zu seinem vorgesehenen Zweck genutzt wird.
				Nach Hecht et al in \cite{Hecht2011} wird in \todo{xyz Prozent} der Fälle der Nutzer-Standort verwendet um ein Toponym anzugeben. \footnote{Hecht et al untersuchen allerdings nur Nutzer-Standorte die in englischer Sprache eingegeben wurden.}
				Im Zuge der vorliegenden Arbeit wurde eine manuelle Untersuchung an xyz Tausend Twitter-Profilen vorgenommen bei denen xyz Prozent der Nutzer ein Toponym im Nutzer-Standort gespeichert hatten.   

				\todo{kleines Beispiel mit Hilfe der Geocoding Api erstellen} 

				Problem 1: Der Nutzer-Standort ist nicht zwingend ein Toponym.

			\paragraph{Nicht gesichert} 

				Dadurch besteht keine Garantie, dass der eingegebene Wert, sollte er ein Toponym darstellen, dem tatsächlichen Standort des Nutzers entspricht. 
				Dies kann durch verschiedene Umstände der Fall sein.
				Zum einen kann es sich um eine bewusste Fehleingabe des Nutzers handeln, hier wird eine korrekte Georeferenzierung schwierig uzusetzen sein.

				Zum anderen kann dies aufgrund des Toponyms und dessen Eigenschaften selbst vorkommen.

				Es gibt beispielsweise zahlreiche Städte-Namen, die in mehreren Ländern verwendet werden.
				Ein gutes Beispiel hierfür sind US Städte. 
				Da die USA ein Einwanderungsland ist übernahmen viele Einwanderer bei der Gründung neuer Städte die Namen aus der alten Heimat. 
				So finden sich in den USA zahlreiche Städte deren Namen exakt den deutschen Städtenamen entsprechen. 
				Es gibt in den USA 30 Städte mit dem Namen Hamburg, 40 mit dem Namen Hannover, 39 mit dem Namen Berlin und 25 mit dem Namen Frankfurt um nur einige beispiele zu nennen.
				Es gibt auch Orte die in einem Land mehrfach vorkommen.
				Innerhalb Deutschlands gibt es beispielsweise 12 Gemeinden mit dem Namen Hausen und zahlreiche Stadtteile die diesen Namen tragen.  
				Gibt ein Nutzer den Standort Hamburg ohne genauere Bezichnung an, kann nicht mit Sicherheit gesagt werden welches HAmburg er meint. 

				Problem 2.1: Der Nutzer-Standort entspricht nicht zwingend dem tatsächlichen Standort des Twitter-Nutzers aufgrund von bewussten Fehleingaben des Nutzers.
				
				Problem 2.2: Der Nutzer-Standort entspricht nicht zwingend dem tatsächlichen Standort des Twitter-Nutzers aufgrund von Doppel- oder Mehrdeutigkeiten des Toponyms.

				\todo{Hier noch überlegen ob Nutzer der sich temporär woanders befindet auch rein müssen.} 

			\paragraph{Nicht Objektiv} 

				Dies bedeutet, dass dasselbe geografische Objekt von unterschiedlichen Nutzern mit unterschiedlichen, gültigen Toponymen bezeichnet werden kann.
				Für den naiven Ansatz stellt dies kein Problem dar solange sämtliche verwendeten Toponyme im Ortsverzeichnis hinterlegt sind.  
				Dieser Umstand muss allerdings beachtet werden, da die umgangssprachlichen Toponyme oft nicht den offiziellen entsprechen. 
				Als Beispiel kann hier Deutschland oder USA gewählt werden. 
				Jedem dürfte bekannt sein, das mit diesen Bezeichnungen zum einen die '"Bundesrepublik Deutschland'" und zum anderen die "'Vereinigten Staaten von Amerika"' gemeint sind. 
				Dieser Umstand muss aleerdings beachtet werden.
				Ein weiteres Problem, welches hier offensichtlich wird, ist die Sprache in welcher der Nutzer-Standort angegeben ist. 
				USA sollte deshalb korrekterweise als "'United States of America"' angegeben werden.
				Für den naiven Ansatz, mit Hilfe eines Ortsverzeichnisses, ist es also notwendig Toponyme in der jeweiligen Landessprache und zusätzlich einige gängige, alternative, umgangssprachliche Toponyme auflösen zu können.  

				Problem 3: Es können mehrere unterschiedliche Toponyme für dasselbe geografische Objekt existieren.  


			\paragraph{Nicht Objektivität in Kombination mit nicht-Zuverlässigkeit des Wertes} 

				Die nicht-Zuverlässigkeit des Wertes besagt, dass der eingegebene Wert kein Toponym darstellen muss.
				Insbesondere kann aber keine Aussage darüber gemacht werden ob es sich beim Nutzer-Standort um ein Toponym handelt oder nicht. 
				Wie vorher bereits erwähnt, können aufgrund der nicht-Objektivität zum selben geografischen Objekt mehrere Toponyme existieren.
				Es kann daraus abgeleitet werden, dass immer ein weiteres Toponym existieren kann.
				In Kombination mit der nicht-Zuverlässigkeit kann angenommen werden, dass dieses zusätzliche Toponym nicht als solches bekannt ist und deshalb nicht als Toponym identifiziert werden kann.

				Es kann deshalb nicht entschieden werden ob der eingegebene Wert tatsächlich ein Toponym darstellt oder nicht. 
				
				Dies kann der Fall sein wenn ein Ort eine Bezeichnung besitzt die nicht allgemein bekannt ist und somit in keiner Datenbank hinterlegt sein kann. 
				Beispielsweise werden in Wikipedia für die Stadt Detroit, im US-Bundesstaat Michigan, folgende Spitznamen angegeben: The Motor City, Motown, Hockeytown, Rock City und The D. 
				Die ersten zwei dürften weltweit einen Gewissen Bekanntheitsgrad haben wohingegen Hockeytown, Rock City und The D weniger bekannt sein dürften.  
				Es existieren Datenbanken mit solchen Städte-Spitznamen, aber für diese kann keine Vollständigkeit garantiert werden. 
				
				Auch besteht die Möglichkeit, dass Spitznamen für Städte existieren die kaum über die Grenzen eines Landes oder sogar der Stadt selbst bekannt sind. 
				Eine weitere Fehlerquelle sind netzwerkinterne Schreibweisen die sich etabliert haben und ausschließlich innerhalb eines Netzwerks verwendet werden.

				Neben diesen Beispielen sind aber auch Toponyme denkbar die einen bestimmten Landstrich oder eine landschaftliche Besonderheit beschreiben.
				Beispielsweise beschreibt '"An der Förde'" eine geografische Region an der Ostsee, meist ist damit die Kieler Förde und dessen Umgebung gemeint. 
				Diese geografischen Bezeichnungen sind unter Umständen nur in speziellen Datenbanken zu finden und können so nur schlecht aufgelöst werden. 

				Problem 4: Toponyme können in ihrer Verwendung gänzlich unbekannt sein und somit nicht als solche erkannt werden.

			\paragraph{Weitere Probleme}
				\todo{Weitere Probleme überarbeiten, dies sind nicht unbedingt Probleme sondern Anforderungen die schon weiter vorne definiert sind. Die müssen hier nicht mehr rein} 
				Die vorgannanten Eigenschaften resultieren daraus, dass der Nutzer-Standort frei eingegeben werden kann und keinerlei Kontrolle oder Verarbeitung seitens Twitter unterliegt. 
				Neben den oben genannten Problemen können dadurch weitere Probleme entstehen.

				Problem 5: Satz- und Sonderzeichen.

				Durch die freie Eingabe können Nutzer auch ausschliesslich Sonder- und Satzzeichen eingeben womit kein bestimmtes geografisches Objekt referenziert wird. 
				Des weiteren können Sonder- und Satzzeichen als Trenner benutzt werden zwischen zwei oder mehr Worten welche ein Toponym bilden.
				
				Problem 6: Sprache- und verwendetes Alphabet.

				Nach den Anforderungen aus Kapitel \ref{sec:Anforderungen} soll die Georeferenzierung unabhängig der verwendeten Sprache und des verwendeten Alphabets funktionieren.

				Des weiteren sollen folgende Anforderungen erfüllt werden:

				Anforderung x: Angabe eines Konfidenzschwellwertes

				Nach den Anforderungen aus Kapitel \ref{sec:Anforderungen} soll ein Konfidenzwert angegeben werden können.

				Anforderung y: Angabe der gewünschten Hierarchieebene 

				Nach den Anforderungen aus Kapitel \ref{sec:Anforderungen} soll ein Konfidenzwert angegeben werden können.

			\paragraph{Fazit} 

				Bei einer einfachen Abfrage auf ein Orstverzeichnis bleiben die vorgenannten Probleme bestehen.
				Jedoch kann durch folgende Massnahmen versucht werden einige der vorgenannten Probleme zu vermeiden. 

				Problem 1 und Problem 3: Kann teilweise dadurch gelöst werden, dass ein möglichst umfangreiches Ortsverzeichnis oder Ortsverzeichnisse aus mehreren Quellen verwendet werden.   
				
				Problem 2.1 : Kann nicht unmittlebar gelöst werden.
				
				Problem 2.2 : Kann unter Umständen gelöst werden durch die Einbeziehung weiterer Felder oder durch genauere Analyse des Wertes. 
				Beispielsweise könnten zunächst alle Wörter im Wert einzeln untersucht werden und im Ortsverzeichnis abgefragt werden. 
				Danach werden alle Paare von Wörtern abgefragt und so weiter. 
				Werden mehrere Treffer zurückgeliefert wird überprüft ob diese eine Hierarchische Beziehung zueinander aufweisen. 
				Ist dies der Fall kann entschieden werden welches Toponym gewählt wird. \todo{Beispiel Ablauf Hamburg, Deutschland}    
				
				Problem 5 : Kann durch die Eliminierung von Satz- und Sonderzeichen gelöst werden. 
				
				Problem 6 : Kann teilweise durch die Verwendung von Ortsverzeichnissen in verschiedenen Sprachen gelöst werden. 

				Ein Ortsverzeichnis kann immer nur diejenigen Orte auflösen, die in ihm hinterlegt sind.
				Deshalb kann insbesondere Problem 4 nicht gelöst werden.

				Durch die Eigenschaften und die vorgenannten Probleme ist der Wert ungeeignet für eine Abfrage auf ein Ortsverzeichnis.  


			\subsection{Die Nutzer-Zeitzone als geografischer Indikator}

				Die Nutzer-Zeitzone ist ebenfalls ein unmittelbarer geografischer Indikator. 
				Der Wert der Nutzer-Zeitzone ist Zuverlässig, Objektiv und nicht gesichert. 
				
				\paragraph{Zuverlässig}
					Der Wert der Nutzer-Zeitzone stellt immer eine Zeitzone dar.
					Es ist dem Nutzer nicht möglich einen Wert einzugeben der nicht einer Zeitzone entspricht.

				\paragraph{Objektivität}
					Wenn zwei Nutzer die sich in dersleben Zeitzone befinden diese angeben sidn die Werte identisch.
					Dies ist genau genommen nicht in allen Fällen richtig.
					Twitter bietet für einige Zeitzonen mehrere Werte an. 
					Beispielsweise stehen für die Zeitzone GMT-7:00 folgende Werte zur Verfügung:

					\begin{enumerate}
					  	\item (GMT-7:00) Arizona
					  	\item (GMT-7:00) Tijuana 
					  	\item (GMT-7:00) Pacific Time (US & Canada)   
					  \end{enumerate}  

					  da aber alle diese Werte auf GMT-7:00 projiziert werden können stellt dies defakto kein Problem dar. 
					  Es kann sogar von Vorteil sein, da durch diesen Wert zusätzliche Informationen geleifert werden.
					  Ein Nutzer aus Arizona wird den ersten Wert den anderen beiden vorziehen und gibt somit eine genauere Angabe seines Standortes. 

				\paragraph{Nicht gesichert} 

				Die Nutzer-Zeitzone wird vom Nutzer aus einer Liste fester Werte gewählt, der gewählte Wert wird allerdings nicht geprüft.
				Hieraus ergibt sich lediglich, dass ein Nutzer den Wert absichtlich falsch eingeben kann oder ihn nicht auswählt wodurch ein Standard-Wert gewählt wird.

				Problem 7: Die Nutzer-Zeitzone entspricht nicht zwingend der tatsächlichen Zeitzone des Nutzers.

				\paragraph{Fazit}

				Durch die Eigenschaften der Nutzer-Zeitzone ergeben sich weniger Probleme als beim Nutzer-Standort.
				Allerdings beschreibt eine Zeitzone eine sehr große geografische Region und stimmt nicht mit Ländergrenzen überein.
				Eine Nutzer-Zeitzone kann somit nicht auf ein eindeutiges geografisches Objekt der geografischen Hierarchie aufgelöst werden.
				Somit kann allein aus der Nutzer-Zeitzone keine brauchbare Information zur Georeferenzierung abgeleitet werden. 
				
				Die Nutzer-Zeitzone kann allerdings als zusätzlicher Indikator einbezogen werden.


				\subsection{Schema zum einlernen der Georeferenz-Basis  Struktur der Georeferenz-Basis}			
					
					Anhand der vorgestellten Struktur und des Schemas soll sukzessive ein Verfahren entwickelt werden welches die oben genannten Probleme möglichst umfassend beseitigt. 
					Die erarbeiteten Lösungen werden dabei den Verarbeitungsschritten des Schemas zugeordnet. 

					\paragraph{Struktur der Georeferenz-Basis} 
						Ein zentrales Element des Verfahrens ist die Georeferenz-Basis.  
					 	Die grundsätzliche Idee besteht darin eine eigene Datenbasis mit Toponymen und zugehörigen Georeferenzen zu erstellen.
						Die Georeferenz-Basis kann, wie ein Ortsverzeichnis, als Wörterbuch für Toponyme angesehen werden.
						Im Gegensatz zu einem herkömmlichen Ortsverzeichnis, soll die Georeferenz-Basis aber aus den Tweets selbst gelernt werden und stellt somit eine Art spezifisches Ortsverzeichnis für die untersuchte Domäne dar.
						Es können Toponyme abgefragt werden und es soll anhand der Abfrage möglich sein den Toponymen eine Georeferenz zuzuweisen.
						Es müssen also zumindest Toponyme und zugehörige Georeferenzen gespeichert werden.

						Zu jedem solchen Tupel, bestehend aus einem Toponym und einer Georeferenz, soll ein Häufigkeitswert hinterlegt werden.
						Dieser Häufigkeitswert kann für weitere Analysen herangezogen werden und bildet bei der Georeferenzierung den zetralen Wert zur Bestimmung der Konfidenzen. 
						Des weiteren wird so vermieden, das Duplikate in der Georeferenz-Basis existieren.

						Die Struktur der Georeferenz-Basis beinhaltet folgende Felder:

						\begin{enumerate}
							\item Toponym
							\item Georeferenz  
							\item Häufigkeit 
						\end{enumerate}


					\paragraph{Schema zum einlernen der Georeferenz-Basis}

					Um die Georeferenz-Basis einlernen zu können wird zunächst eine umfangreiche Tweet-Sammlung benötigt.
					Jeder Tweet in dieser Sammlung muss den Nutzer-Standort und die Nutzer-Zeitzone sowie eine zugehörige Georeferenz enthalten.
					Die Georeferenz liegt dabei in Form von Längen- und Breitengrad vor. 
					
					Pro Tweet werden, entsprechend dem Ablauf aus Abbildung \ref{A2}, folgende Verarbeitungsschritte ausgeführt:

					\begin{enumerate}
						\item Vorverarbeitung der Indikatoren
						\item Vorverarbeitung der geografischen Koordinaten
						\item Speichern der Daten in die Georeferenz-Basis
					\end{enumerate}

					Der letzte Schritt, das Speichern der Daten in die Georeferenz-Basis, läuft dabei immer nach dem gleichen Prinzip ab und wird deshalb hier kurz erläutert.
					
					Aus den vorhergehenden Schritten resultiert jeweils ein Tupel aus einem Toponym und einer Georeferenz. 
					Ist exakt dieses Tupel in der Georeferenz-Basis vorhanden wird der Häufigkeitswert um einen Zähler erhöht, ist das Paar nicht in der Georeferenz-Basis wird in diesem ein neuer Datenatz angelegt und der Häufigkeistwert mit 1 initialisiert.

				\subsection{Erster Ansatz zum einlernen der Georeferenz-Basis}

					Bei diesem ersten Ansatz werden bereits einige Probleme gelöst die in \ref{subsec:ulAsgeogInd} angesprochen wurden. 
					Zunächst soll auf die Verwendung des Nutzer-Standortes und der Nutzer-Zeitzone als Indikator eingegangen werden.
					Es sollen dabei die angewendeten Verfahren erläutert werden.
					Danach wird die Vorverarbeitung der geografischen Koordinaten betrachtet.
					Danach soll die 
					Zum Schluss wird eine Übersicht nach dem Schema auf ref xyz gegeben in dem den Schritten des Schemas die Vorverarbeitungsschritte zugeordnet werden. 



					\subsubsection{Verwendung des Nutzer-Standorts als Indikator}

					Es soll hier darauf eingegangen werden wie sich der Nutzer-Standort als geografischer Indikator verwenden lässt und welche Vorverarbeitungsschritte dazu notwendig sind. 

					\paragraph{Behandlung von Sonder- und Satzzeichen im Nutzer-Standort} 
						Oft werden im Nutzer-Standort Sonder- und Satzzeichen verwendet. 
						Einige Nutzer haben ausschließlich Sonder- und Satzzeichen als Nutzer-Standort angegeben, andere benutzen diese um Emotionen auszudrücken oder als Dekoration. 
						Beispiele hierfür sind "'I $\heartsuit$ New York"' oder "'$\dagger\textasciitilde$ Los Angeles$\textasciitilde\dagger$"'.
						Es konnte kein Hinweis darauf gefunden werden, dass Sonder- und Satzzeichen zusätzliche Informationen zum angegebenen Nutzer-Standort liefern. 
						In den x Millionen verfügbaren Tweets befinden sich y Nutzer welche einen Nutzer-Standort angegeben haben der ausschließlich aus Sonder- oder Satzzeichen besteht. 
						\todo{Auswertung von Sonder Satzzeichen Datensätzen in UL} 
						Es wurden lediglich einige Beispiele gefunden in denen Satzzeichen ein Bestandteil des Standortes bilden.
						Oft werden Kommas zur hierachischen Trennung zwischen den Toponymen verwendet.
						"'Karlsruhe, Deutschland"', "'San Diego CA, USA"' oder "'Mühlhausen, Thüringen"' sind Beispiele hierfür.
						Da die Verwendung allerdings nicht einheitlich erfolgt ist es schwierig daraus eine verlässliche Hierarchiebeziehung abzuleiten.
						Auch als Bestandteil eines Toponyms werden Sattzzeichen verwendet.
						Ein Beispiel hierfür ist "'Paris, 3. Arrondissement"'.
						Entfernt man die Satzzeichen, liefern diese Werte allerdings immernoch ausreichende Informationen über den Standort und können als Toponym verwendet werden.  
						In diesem Vorverarbeitungsschritt werden alle Sonder- und Satzzeichen entfernt. 
						Dadurch wird gewährleistet, dass keine unnötigen Zeichen in den folgenden Schritten verarbeitet werden müssen. 

					\paragraph{Der Nutzer-Standort als Toponym} 
						Da es sich beim Nutzer-Standort um einen unmittelbaren geografischen Indikator handelt wird die Tatsache ignoriert, dass die Werte des Nutzer-Standortes nicht zwingend ein Toponym darstellen müssen. 
						Es wird implizit angenommen, dass die Werte im Nutzer-Standort ein Toponym darstellen.
						Nach \cite{Hecht2011} ist diese Annahme in xyz Prozent der Fälle korrekt und stellet somit kein Problem dar. 
						Auch nach den Untersuchungen im Zuge dieser Arbeit konnte festgestellt werden das ca. xyz Prozent der eingegebenen Werte tatsächlich ein Toponym darstellen und die Annahme somit korrekt ist. \footnote{
						Hecht et al haben nur Nutzer-Standorte in englischer Sprache untersucht, wohingegen in den selbst durchgefürten Untersuchunge keine solche Einschränkung besteht} 
						Die restlichen Fälle teilen sich in zwei Klassen auf. 
						Zum ersten kann ein Wert zwar ein Toponym darstellen aber es konnte nicht festgestellt werden ob es sich um ein Toponym handelt oder nicht.
						Es ist in diesem Fall nicht zu entscheiden ob die Annahme richtig oder falsch ist. 
						Sollte der Wert kein Toponym darstellen ist die Annahme falsch.

						Durch diese Annahme wird zunächst kein Problem direkt gelöst. 
						Es wird lediglich sichergestellt, dass keine potenziellen Toponyme in einer frühen Phase verworfen werden. 
						Damit kann diese Annahme als vorbereitender Schritt gesehen werden um Problem 3 (Es können mehrere unterschiedliche Toponyme für dasselbe geografische Objekt existieren) und Problem 4 (Toponyme können in ihrer Verwendung gänzlich unbekannt sein und somit nicht als solche erkannt werden) in einem späteren Schritt zu lösen. 


						Durch die Annahme, dass der Nutzer-Standort immer ein Toponym darstellt wird das Problem 1: '"Der Wert des Nutzer-Standortes stellt nicht zwingend ein Toponym'" dar zunächst ignoriert.
						Damit beinhaltet die Georeferenz-Basis Werte welche kein Toponym darstellen und trotzdem auf eine Georeferenz verweisen. 

						Um zu bestimmen ob es sich bei einem Wert tatsächlich um ein Toponym handelt kann nun der Häufigkeistwert einbezogen werden.
						Der Häufigkeistwert sagt aus wie oft ein Tupel aus Toponym und Georeferenz in der gesamten Verarbeitung vorkam.

						Wir an einem Ort ein Toponym x besonders oft genutzt ist es wahrscheinlicher das dieses Toponym den Ort bezeichnet an dem er sich aufhält. 



					Um nun zu enstcheiden ob es sich bei einem Toponym, welches in der Georeferenz-Basis gespeichert wurd tatsächlich um ein Toponym handelt kann der Häufigkeitswert herangezogen werden. 
					Dieser Wert gibt an wie häufig die Kombination aus einem potenziellen Toponym und einer Georeferenz vorkam.
					

					\subsubsection{Verwendung der Zeitzone als geografischer Indikator}


					\subsubsection{Verwendung der Georeferenz}  
						Die in einem Tweet hinterlegte Georeferenz wird in Form eines Längen- und Breitengrades angegeben.
						Die meisten dieser Angaben werden mit GPS Modulen in mobilen Endgeräten erzeugt. 
						Moderne GPS Module in Smartphones haben eine relativ hohe Genauigkeit, auch wenn diese Schwankungen unterliegen kann.
						Ein Problem, dass durch diese Genauigkeit entsteht ist, dass zwei Tweets nur sehr selten exakt den gleichen Wert für den Längen- und Breitengard aufweisen werden.

						Damit wird der Fall, dass ein Tupel aus Toponym und Georeferenz übereinstimmen extrem selten vorkommen.
						Wenn beispielsweise eine Präzision von lediglich 100 Quadratmetern erreicht wird ist es extrem unwahrscheinlich das zwei Tweets, welche im selben Kaufhaus abgesetzt wurden, dieselben Längen- und Breitengrade aufweisen.
						Im schlimmsten Fall wird für jedes vorkommen ein und desselben Toponyms ein neuer Datensatz in der Georeferenz-Basis erstellt obwohl die Positionen nur wenige hundert Meter auseinander liegen.

						Es muss also ein Weg gefunden werden wie Tweets, die sich in geografischer Nähe zueinander befinden zusammengefasst werden können.

						In Abschnitt \ref{chp:Grundlagen} wurde bereits eine geografische Hierarchie vorgestellt.
						Die unterste Ebene, und somit die maximale Genauigkeit die mit dieser erreicht werden kann ist die der Städteebene.
						Auch die Georeferenzierung soll maximal auf Städtebene auflösen.
						Es wäre also sinnvoll jedem Tweet anhand des Längen- und Breitengrades eine Stadt zuzuweisen.
						Damit werden Tweets, die innerhalb einer Stadt gesendet werden dieser zugeordnet.
						
						Eine einfache Möglichkeit dies umzusetzen besteht darin die nächstgelegene Stadt zu finden und diese dem Tweet zuzurodnen.
						Dies lässt sich mit Hilfe eines Nächste-Nachbarn-Algorithmus einfach umsetzen.

						Dies macht auch in Bezug auf den Wert des Nutzer-Standortes Sinn. 
						Hecht et al haben in \cite{Hecht2011} herausgefunden, dass die meisten Anagben eine Genauigkeit auf Städteebene aufweisen.  
						
						Hat der Nutzer aber lediglich das Land angegeben wird dem Wert trotzdem eine Stadt zugewiesen. \todo{Dieses Problem später behandeln} 


					\subsubsection{Vorläufiges Schema zum einlernen der Georeferenz-Basis}

					Damit lassen sich meherere Probleme aus \ref{subsec:ulAsgeogInd} lösen.

					
 

					 





					

					In \ref{subsec:ulAsgeogInd} wurden die Eingenschaften des Nutzer-Stadortes eingehend besprochen. 
					Aus den Eigenschaften des Nutzer-Standortes kann geschlossen werden, dass es sehr schwierig ist zu entscheiden welche Werte Toponyme darstellen und welche nicht.


					

					In \ref{subsec:ulAsgeogInd} wurde der Nutzer-Stadort schon eingehend untersucht. 

					Als Indikatoren werden der Nutzer-Standort und die Nutzer-Zeitzone verwendet.					

					Die Werte der beiden Indikatoren werden dabei direkt übernommen.




					Bei diesem vrogehen ensteheten  





					Die hinterlegten Toponyme in der Georeferenz-Basis sollen durch eine Vorverarbeitung der Indikatoren erzeugt werden.
					Zunächst wird angenommen, das die Vorverarbeitung lediglich die 

					Durch die bereits erwähnten Probleme mit dem Nutzer-Standort ergeben sich besondere Anforderungen an die Struktur der Georeferenz-Basis.

					Problem 1 besagt, dass der Nutzer-Standort kein Toponym darstellen muss.
					Zudem besagt Problem 4 dass ein Toponym gänzlich unbekannt sein kann.
					Diese beiden Probleme können in der Vorverarbeitung nicht direkt gelöst werden.

					Da der Nutzer-Standort allerdings ein unmittelbarer geografischer Indikator ist, soll der Nutzer-Standort zunächst so behandelt werden als ob er ein 
					Toponym darstellt.
					Somit wird kein Toponym verworfen, welches fälschlicherweise nicht als solches erkannt wird. 



				  


				

					\paragraph{Vorverarbeitung der Indikatoren}  
						

						In der Vorverarbeitung sollen aus den Indikatoren weitere Informationen extrahiert werden. 

						Die Toponyme werden als poteziell bezeichnet da zunächst nicht entschieden werden kann ob es sich tatsächlich um Toponyme handelt oder nicht. 

						In der Vorverarbeitung sollen die Indikatoren analysiert werden und dadurch potenzielle Toponyme aus diesen extrahiert werden.
						Die potenziellen Toponyme werden, im Gegensatz zu einem Ortsverzeichnis, durch eine Vorverarbeitung aus einer Menge an Tweets erzeugt. 
						Pro Tweet können mehrere potenzielle Toponyme durch die Vorverarbeitung erzeugt werden.
						Damit besteht zwischen einem Tweet und den Datensätzen in der Georeferenz-Basis eine 1-zu-n Beziehung, es können also aus den Indikatoren eines Tweets n Datensätze in der Georeferenz-Basis erzeugt werden. 
						Für jedes potenzielle Toponym wird ein neuer Datensatz in der Georeferenz-Basis angelegt. 


					Zu jedem potenziellen Toponym, welches in der Georeferenz-Basis hinterlegt ist, ist eine Georeferenz gespeichert.

					
					
					Jedem Datensatz wird zudem ein geografisches Objekt zugewiesen.
					Das geografische Objekt wird dabei aus den geografischen Koordinaten desjenigen Tweets erzeugt aus dem das potenzielle Toponym des Datensatzes abgeleitet wurde.

					Bereits mit dieser Struktur der Georeferenz-Basis kann ein nachschlagen eines Indikators realsiert werden. 


					Der Häufigkeitswert gibt an wie häufig die Kombination von Toponym und geografischem Objekt vorkam. 
					In Abbildung \ref{A6} wird ein Minimalbeispiel zur Erzeugung der 
					sind 4 potenzielle Toponyme und ihre zugehörigen geografischen Objekte gelistet.
					
					Toponym 1 und 3 Stimmen sowohl im Wert des Toponyms als auch in der Georeferenz überein. 
					Daraus resultiert Datensatz 1 in der Georeferenz-Basis. 
					Toponym 3 stimmt zwar im Wert des Toponyms überein, aber das geografische Objekt ist ein anderes. 
					Daraus resultiert Datensatz 2 in der Georeferenz-Basis.
					Bei Toponym 4 stimmt das geografische Objekt mit den anderen überein, aber der Wert des Toponyms stimmt nicht überein.
					Daraus resultiert Datensatz 3 in der Georeferenz-Basis.


					Jeder Eintrag der Tabelle beinhaltet mehrere Felder und wird als Datensatz bezeichnet.

					Da während der Georeferenzierung die Indikatoren nachgeschlagen werden sollen muss ein Feld vorhanden sein welches die verarbeiteten Indikatoren beinhaltet.
					Dieses Feld wird als Indikatorfeld bezeichnet. 

					Des weiteren muss ein Feld zur Georeferenzierung enthalten sein, um dem Indikator-Wert ein geografisches Objekt zuweisen zu können. 
					Dieses Feld wird als Georeferenzfeld bezeichnet. 

					Des weiteren soll ein Feld vorhanden sein, welches angibt wie häufig die Kombination Indikator zu Georeferenz vorgekommen ist. 


				\subsubsection{Auflösung der Georeferenz auf ein geografisches Objekt}

				Zuerst soll die Frage beantwortete werden wieso die geografischen Koordinaten auf einen diskreten Wert aufgelöst werden müssen. 
				Im Teil \ref{sususec:strukturGeoRefBasis} wird beschrieben, dass 

				Dieser Schritt ist notwendig um jedem potenziellen Toponym, welches aus den Indikatoren erzeugt wird eine Georeferenz zuzuweisen. 
				Die Georeferenzen liegen in der Tweet-Sammlung als geografische Koordinaten vor und stellen deshalb kontinuierliche Werte dar.
				In einigen Arbeiten werden geografische Koordinaten verwendet um die Georeferenzen darzustellen. 

				In der vorliegenden Arbeit soll jedoch ein anderer Weg gegangen werden um weitere Vorteile aus den geografischen Daten zu ziehen.

				Die geografischen Koordinaten sollen auf die unterste Ebene der geografischen Hierarchie abgebildet werden. 
				Dies bedeutet, dass jeder geografischen Koordinate eine Stadt zugeordnet wird.
				Damit werden die Georeferenzen in eine diskrete Form gebracht.  
				Diese Auflösung wird mit Hilfe einer Nächste-Nachbarn-Klassifikation vorgenommen.
				Somit wird jeder geografischen Koordinate die nächstgelgene Stadt zugewiesen und diese als Georeferenz gespeichert. 
				In Abbildung \ref{A5} ist eine Auflösung verschiedener Punkt exemplarisch dargestellt. 
				Dieses Vorgehen hat den Vorteil, dass man neben den Städten implizit auch die Administrationsebenen sowie das zugehörige Land gegeben hat.













				Der Vorteil beim einlernen der Toponyme durch Tweets besteht darin, dass man zunächst alle Werte als potentielle Toponyme behandelt und diesen eine Georeferenz zuweist.

				\paragraph{Nicht Toponyme und xyz} 
				Stellt sich für einzelne so eingelernte Werte heraus, dass diese keine Toponyme darstellen oder xyz werden die Toponyme entweder zu selten vorkommen oder aber auf der Welt verstreut sein.   

				man nicht auf die Vollständigkeit eines Ortsverzeichnisses angewiesen ist.
				Potentiell werden Werte eingelernt die in einem herkömmlichen Ortsverzeichnis nicht vorkommen.   

				Das einlernen aus den Tweets selbst bringt meherere Vorteile. 
				Man ist nicht auf die Vollständigkeit eines Orstverzeichnisses angewiesen.
				
 
				Hier sollen nun, ausgehend von der Struktur der Georeferenz-Basis, die einzelnen Schritte der Vorverarebitung erläutert werden. 
				Dieser Top-Down Ansatz wird gewählt, da bedingt durch die Struktur der Georeferenz-Basis bestimmte Anforderungen an die Vorverarbeitung gestellt werden.

				Im folgenden sollen die Anforderngen an die Struktur der Georeferenz-Basis sukzessive entwickelt werden.
				Zunächst soll durch die Georeferenz-Basis das Problem der Georeferenzierung gelöst werden. 
				Dies bedeutet, zu den Indikatoren eines Tweets soll nach einer Suchanfrage, an die Georeferenz-Basis, eine Georeferenz geliefert werden.
				Es ist also notwendig in der Georeferenz-Basis Indikator-Werte und zugehörige Georeferenzen zu speichern.



				
				  

				Zunächst findet eine Vorverarbeitung der Indikatoren statt. 
				Durch die Vorverarbeitung können mehrere Werte für einen Tweet und somit für ein Indikator-Paar enstehen. 
				Das bedeuete die Vorverarbeitung erzeugt pro Tweet meherere Datensätze in der Georeferenz-Basis.

				Wie bereits im Abschnitt \ref{sec:ueberblick} erwähnt soll die Georeferenz-Basis zum Nachschlagen der Indikatoren dienen.  

				Die Idee besteht darin eine Datenbasis aufzubauen welche zum Nachschlagen der Indikatoren genutzt werden kann um diesen eine Georeferenz zuzuordnen.
				In dieser Hinsicht unterscheidet sich die hier vorgestellte Lösung nicht von der Georeferenzierung mit Hilfe eines Ortsverzeichnisses.
				In beiden Fällen werden die Werte der Indikatoren in einem Verzeichnis nachgeschlagen. 
				
				Die Georeferenz-Basis muss also potentielle Werte für die Indikatoren beinhalten.
				Im Gegensatz zum Ortsverzeichnis werden diese Werte jedoch mit Hilfe einer Tweet-Sammlung eingelernt.
				Diese Werte sollen als Indikator-Wert bezeichnet werden.

				Des weiteren muss eine Georeferenz hinterlegt sein welche den Indikator-Werten ein geografisches Objekt zuordnet.

				
				Die Indikator-Werte werden aus den Indikatoren in der Tweet-Sammlung generiert.
				Dabei können aus einem Tweet und dessen Indikatoren mehrere Einträge für die Indikator-Werte erzeigt werden. 
				Diese  

				Das Feld in dem diese Werte zum nachschlagen hinterlegt sind wird Indikator-Wert genannt. 
				Die Indikator-Werte werden durch die Vorverarbeitung erzeugt.   
				Es ist also möglich, dass Werte mehrmals vorkommen. 
				Diesem Umstand wird Rechnung getragen indem ein Feld eingeführt wird welches das Vorkommen der jeweiligen Indikatoren zählt. 
				Dieses Feld wird als Indikator-Anzahl bezeichnet.

				Zu jedem Indikator-Wert wird die Anzahl 

				Des weiteren werden die Indikatoren einer Vorverarbeitung unterzogen um mehr Informationen aus ihnen extrahieren zu können. 

				Die hinterlegte Georeferenz entspricht immer einer Stadt, einer Administartionsebene zweiter Ordnung, einer Administartionsebene erster Ordnung und einem Land. 
				Um dies aus zu erreichen muss jeder Tweet auf eine Stadt abgebildet werden.


		  	\subsubsection{Eliminierung von Satz- und Sonderzeichen}

			  	

			\subsubsection{Tokenisierung}

				Das Verfahren macht es nötig die Wörter im Nutzer-Standort einzeln zu behandeln. 
				Deshalb besteht der zweite Schritt des Verfahrens darin, den Nutzer-Standort zu zerlegen und jedes darin vorkommende Wort als einzelnen Token zu betrachten. 
				Dabei wird die Reihenfolge der Wörter zunächst nicht verändert.

				Um Tokens zu Kennzeichnen werden eckige Klammern verwendet.  
				Mit [New] ist dann der Token New gemeint. 
				"'New York City"' würde nach der Tokenisierung als [New][York][City] dargestellt werden. 

				\todo{Ablaufplan Tokenizing} 

			\subsubsection{N-Gramme erstellen}

				Die Kernidee besteht darin den Nutzer-Standort in N-Gramme zu zerlegen. 


		  	\subsubsection{Identifizierung von Toponymen innerhalb des Nutzer-Standortes}
		  		
		  		In diesem Schritt wird nun die Eigenschaft des unmittelbaren geografischen Indikators ausgenutzt.
		  		Die Idee besteht darin, Toponyme die aus zwei oder mehr Tokens bestehen zusammenfassen zu können und in den folgenden Schritten als zusammengehörig zu behandeln.

		  		Als Beispiel kann hier der Nutzer-Standort [New][York][City][United][States][of][America] betrachtet werden. \footnote{Dies ist ein fiktives Extrembeispiel für einen Nutzer-Standort nach Eliminierung der Sonder- und Satzzeichen und nach der Tokenisierung}
		  		Nach einer Abfrage auf ein Ortsverzeichnis können [New][York][City] und [United][States][of][America] zusammengeführt werden, woraus sich folgende Tokens ergeben:
		  		[New York City][United States of America]   

		  		Dieser Schritt vereinfacht die künftige Verarbeitung, da im Beispiel statt 6 Tokens nur noch 2 betrachtet werden müssen, welche überdies als Toponym erkannt wurden.
		  		Dadurch werden in diesem Schritt zwar zusätzliche Informationen aus dem Nutzer-Standort gezogen, allerdings wird keine konkrete Georeferenz dem Nutzer-Standort zugeordnet.
		  		In diesem Schritt soll der Indikator nicht auf ein geografische Objekt aufgelöst werden. 
		  		Die Abfrage dient lediglich dazu, zusammengehörige Token zusammenzuführen und diese in den folgenden Schritten als ein einzelner Token zu behandeln. 

		  		\todo{Ablaufplan Toponyme identifizieren} 



		  	\subsubsection{Alphanumerische Sortierung}

		  		In diesem Schritt werden die Token alphanumerisch sortiert. 
		  		Der Vorteil ist, dass die Reihenfolge in der die Token angegeben wurden keine Rolle mehr spielt. 
		  		Ist in einem Nutzer-Standort das Land und eine Stadt genannt, spielt es keine Rolle ob das Land oder die Stadt zuerst genannt wird. 

		  		Als Beispiel soll diesmal die Stadt San Diego im Budnesstaat Kalifornien (CA) in den Vereinigten Staaten von Amerika (USA) dienen. 
		  		Zwie Nutzer geben ihre Standorte folgendermaßen an:

		  		\begin{enumerate}
		  			\item[Nutzer 1]  	[San Diego][California][USA]
		  			\item[Nutzer 2] 	[USA][California][San Diego] 
		  		\end{enumerate}

		  		Direkt kann keine Übereinstimmung festgestellt werden. 
		  		Es müsste kontrolliert werden ob alle Token übereinstimmen.
		  		Sortiert man die Tokens vorher, kann die Übereinstimmung direkt erkannt werden.
		  		In beiden Fällen würde die Sortierung [California][San Diego][USA] ergeben.
		  		Es werden also nicht zwei Datensätze mit denselben Token angelegt, sondern die beiden Eingaben werden gleich behandelt.




		\todo{Zeitzone als zusätzlichen geografischen Indikator einführen Unsicherheiten ausräumen Beispiel suchen}

		  	\subsubsection{alphanumerische Sortierung der Tokens}

		  	\subsubsection{URL Encoding}
		  		\subsection{Encoding}
				Problematik unterschiedlicher Sprachen, 
				url-encoding sinnvoll als Vorbereitung auf Webservice. 

		  	

		\subsection{Die Zeitzone als geografischer Indikator}     

	\section{Einlernen der Georeferenz-Basis}

		\subsection{Zuordnung der georeferenzierten Tweets zu geografischen Entitäten} 

		\subsection{Erzeugung von N-Grammen}

				\paragraph{einbauen als Beispiel für Ngramisierung} 
				Beispiel wenn Karlsruhe Deutschland und Berlin Deutschland und Abstatt Deutschland dann kann durch die geografische Hierarchie und die NGramme Wissen über den Term Deutschland gezogen werden da auf Länderebene Deutschland immer dem gleichen geografischen Ding zugeordnet wird 

				Vorteil Toponym Identifizierung Verarbeitungsschritte:  insbesondere bei der Erzeugung von N-Grammen im Schritt 

		  		\paragraph{Erzeugung von N-Grammen}
			  	Aus den alphanumerisch sortierten Tokens der Vorverarbeitung werden in diesem Schritt N-Gramme erzeugt.
			  	Genauer werden N-Gramme der Ordnung 1, 2 und 3 erzeugt.
			  	Diese werden auch als Mono-, Bi- und Tri-Gramme bezeichnet.  

			  	Jedes dieser so entstandenen N-Gramme wird die Zeitzone angehängt.  
				Das Ergebnis dieser Phase ist eine Datenbasis welche eine Reihe von Zeichenketten aus der Nutzer-Standort und der Nutzer-Zeitzone generiert haben. 
				Jeder dieser Zeicheneketten wird die Häufigkeit ihres Vorkommens und die nächste Stadt mit über 15.000 Einwohnern zugeordnet. 

				
		\subsection{Matching auf N-Gramme und geografische Entität}

			\subsubsection{Counting} 


	\begin{enumerate}
		\item Datenstruktur
		\item Matching
		\item Counting  
	\end{enumerate}

	\section{Georeferenzierung}   
	In der zweiten Phase kann mit Hilfe der Datenbasis die eigentliche Georeferenzierung von Twitter-Nutzern, mit unbekannter geografischer Position, durchgeführt werden. 
	Es wird dem Anwender ermöglicht die Genauigkeit über die geografischen Hierarchien anzugeben und einen Konfidenzschwellwert zu bestimmen.

	Bei der Georeferenzierung kann bestimmt werden wie genau die geografische Position oder die geografische Region bestimmt werden soll. 
	Dabei kann zwischen den bereits in Kapitel \ref{par: geografische Hierarchie} erläuterten Hierarchieebenen gewählt werden.
	Dies hat den Vorteil, dass die Genauigkeit der Georeferenzierung den jeweiligen Anforderungen angepasst werden kann.
	Des weiteren kann eine Konfidenz angegeben werden, desto höher die Konfidenzschwelle gewählt wird desto sicherer ist die Georeferenzierung. 
	
	


\section{Geolocation Mapping}

	\subsection{nearest neighbour mapping}
		\begin{enumerate}
			\item \todo{Welches Fehlermaß kann für das mapping angewandt werden? auf Städteebene gut möglich mit geografischen Distanzen, admin2,amdin1, Land schlecht möglich mit Distanzen} Wie genau kann gemappt werden? Fehler Durchschnitt. 
			\item Mapping auf cities 1000/1000/15000 mit Daten zu durchschnitll. Abstand
			\item Hier ist noch Verbesserungspotenzial -> wenn Mapping Distanz zu weit entfernt -> verwerfen! 
		\end{enumerate} 

\section{Verknüpfung von Indikatoren und geografischen Lokationen zur wiedergewinnung des erlernten Wissens}
	
	\subsection{Generierung eines Wissendatensatzes}

	\subsection{Verknüpfung mit Geodaten}

	\subsection{Auflösen auf Administartionsebenen, Länder}

\section{Lokalisieren von Tweets ohne konkrete geografische Daten}
	
	\subsection{Ablauf der Lokalisierung}
	
	\subsection{Lokalisierungssicherheit durch Ausnutzung der geografischen Hierarchiebeziehungen}


\section*{einbauen!!!}
\subsection{Geografische Grundbegriffe und Geografiedaten}

		\subsubsection{Geografische Grundbegriffe}

		\subsubsection{Geonames.org} \footnote{eventuell erst in Implemetierung darauf eingehen} 
			

		\subsubsection{}	

	\subsection{???} 
		\subsubsection{N-Gramme}
			\begin{enumerate}
				\item NGramme allgemein, Verwendung, Beispiele. 
				\item \todo{NGramme -> Nochmal genau prüfen, Zusammenhang zu Markov Modell und NGram Statistik herausstellen} Zusammenhang zwischen Länge/Grad eines N-Grammes und Wahrscheinlichkeiten. -> mathematische Herleitung?!
			\end{enumerate}




\section{Einbauen in dieses Kapitel}

Die folgenden Vorverarbeitungsschritte werden durchgeführt.

	\begin{enumerate}
		\item Eliminierung von Sonderzeichen
		\item ausschließlich Kleinschreibung
		\item geografische Zuordnung von Teilworten \todo{Bessere Umschreibung finden für Teilworte, es ist eig. eine Menge von Worten aus Nutzer-Standort} 	
		\item Tokenisierung
		\item html Encoding
		\item alphanumerische Sortierung 
	\end{enumerate}

	Diese Vorverarbeitung dient der Bereiningung und Vereinheitlichung des Nutzer-Standorts.  
	Die gegografische Zuordnung dient der  

	In den einzelnen Stufen der Vorverarbeitung werden Sonderzeichen entfernt, alle Zeichen in Kleinbuchstaben umgewandelt, in der Wortfolge werden nach geografischen Begriffen gesucht die zwei oder mehr Worte beinhalten, die Zeichen werden url-encoded und die einzlenen Wörter werden in Tokens zerlegt welche alphanumerisch sortiert werden.
	Im nächsten Schritt werden aus den Tokens Uni-Gramme, Bi-Gramme und Tri-Gramme erstellt. 



	\paragraph{In Bewertung einbauen} 
	Geocoding nach Ortsverzeichnis umbauen
	Legt man zugrunde, dass der Nutzer-Standort als ungesicherter, unmittelbarer geografischer Indikator angesehen werden kann, besteht eine Möglichkeit der Georeferenzierung darin, eine sogenannte Geocoding-API zu nutzen.
	Die Nutzer-Zeitzone wird in diesem Fall nicht als Indikator herangezogen, da diese von den Geocoding-API's nicht als zusätzliche Information verarbeitet wird. 
	Eine Reihe von bekannten Firmen bietet eine API zur Georeferenzierung an. 
	Die bekanntesten sind Google, Yahoo, Microsoft, Map Quest und Cloud Made. 
	Teilweise sind die Anfragen, welche an die Geocoding-API's gesendet werden können, in ihrer Anzahl begrenzt.
	Auch die Antwortzeiten der Geocoding-APIs begrenzen die Anzahl möglicher Anfragen pro Zeiteinheit. 
	In Tabelle \ref{eine Tabelle mit den Georef API anbietern} ist eine Auflistung der Anbieter mit den jeweiligen Begrenzungen dargestellt.
	\todo{Tabelle mit Georef Api Anbietern.}
	Eine detaillierte Analyse der Antwortzeiten wurde im Zuge dieser Arbeit nicht durchgeführt. \todo{Link in footnote einfügen} \footnote{für eine Analyse Vergleiche} 


	
	Dieses vorgehen wird in einigen Arbeiten angewendet um den Nutzer-Standort zu bestimmen. 
	Dabei wird, mit einer simplen Vorverarbeitung des Nutzer-Standortes, direkt in einer Geografie-Datenbank nach der eingegebenen Zeichenfolge gesucht. 

	Durch die Vorverarbeitung werden die eingegebenen Indikatoren genauer analysiert, zusätzliche Informationen extrahiert und in eine einheitliche Form gebracht.
	Pro Tweet können dadurch mehrere Werte aus den ursprünglichen Indikatoren abgeleitet werden.
	Beispielsweise könnte der Nutzer-Standort Wert "'Karlsruhe, Deutschland"' getrennt werden und "'Karlsruhe"' , "'Deutschland"' sowie "'Karlsruhe, Deutschland"' seperat betrachtet werden.  
	Danach wird, entsprechend des Längen- und Breitengrades aus dem Tweet, jedem dieser neuen Werte ein geografisches Objekt zugeordnet.

	Exemplarisch ist dies für einen Tweet mit dem Nutzer-Standort "'Karlsruhe, Deutschland"' und einem Längen- und Breitengrad in Abbildung \ref{A4} dargestellt.
	Dabei wird der Indikator in drei neue Indikatoren aufgeteilt dem jeweils ein geografisches Objekt als konkrete Georeferenz zugeordnet wird.
	
	Sind die Indikatoren eines Tweets derart verarbeitet liegt eine Menge neu erzeugter Indikatoren vor denen jeweils eine Stadt zugeordnet ist.
	Aus diesen wird dann die Georeferenz-Basis erstellt, dabie werden die neuen Daten in der Georeferenz-Basis gespeichert.
	Sollte die Kombination aus Indikator-Wert und geogarfischem Objekt bereist in der Georeferenz-Basis existieren wird in einem extra Feld ein Zähler inkrementiert.
	Dieser Wert gibt dann die Häufigkeit der Kombination Indikator-Wert und geografisches Objekt an. 
	Die Georeferenz-Basis beinhaltet die verarbeiteten Indikatoren und das zuvor zugeordnete geografische Objekt.

	sowie die Häufigkeit in der die Kombination Indikator/Stadt ermittelt wurde.
	

	Das Ergebnis dieser Suche ist eine Menge an Datensätzen.
	
	Jeder Datensatz besteht aus einem Indikator-Wert, einer Georeferenz auf eine Stadt und der Anzahl der vorkommen dieser Kombination.  
	Aus diesen Datensätzen wird unter Berücksichtigung des angegebenen Konfidenzschwellwertes und der geografischen Hierarchie die endgültige Georeferenz als Ergebnis bestimmt.  

